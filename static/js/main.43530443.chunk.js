(this["webpackJsonpconcore-editor"]=this["webpackJsonpconcore-editor"]||[]).push([[0],{11:function(e,t,a){"use strict";t.a={ADD_NODE:"ADD_NODE",ADD_EDGE:"ADD_EDGE",UPDATE_NODE:"UPDATE_NODE",UPDATE_EDGE:"UPDATE_EDGE",UPDATE_DATA:"UPDATE_DATA",DEL_NODE:"DEL_NODE",DEL_EDGE:"DEL_EDGE",SET_POS:"SET_POS",SET_DIM:"SET_DIM",SET_BENDW:"SET_BENDW"}},148:function(e,t,a){},161:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(19),_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(22),_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(35),_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(36),_calculations_bending_dist_weight__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(47),_graph_actions__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(11),_reducer__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6),_2_canvas__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(178),GraphComponent=function(_GraphCanvas){Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(GraphComponent,_GraphCanvas);var _super=Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__.a)(GraphComponent);function GraphComponent(){var e;Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,GraphComponent);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];e=_super.call.apply(_super,[this].concat(a));var r=a[5],o=a[6];return e.setEdgeNodeValidator({nodeValidator:r,edgeValidator:o}),e.getTid=function(){return(new Date).getTime()},e}return Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(GraphComponent,[{key:"getPos",value:function(){for(var e=this.cy.$("node"),t={x:100,y:100},a=!0;a;){a=!1;for(var n=0;n<e.length;n+=1){var r=e[n].position();a=a||r.x===t.x&&r.y===t.y}a&&(t.x+=10,t.y+=10)}return t}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ordin",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getPos(),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.getTid(),c=this.cy.add({group:"nodes",data:Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},r),{},{id:o,label:e,type:a,style:t}),position:n});return this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.DEL_NODE,parameters:[c.id()]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.ADD_NODE,parameters:[e,t,a,n,r,c.id()]},i),c}},{key:"getEdgesBetweenNodes",value:function(e,t){return this.getById(e).edgesWith(this.getById(t))}},{key:"getBendingD",value:function(e,t){var a=this.getEdgesBetweenNodes(e,t),n=new Set;a.forEach((function(e){t===e.target().id()?n.add(e.data("bendData").bendDistance):n.add(-e.data("bendData").bendDistance)}));for(var r=0;;r+=20){if(!n.has(r))return r;if(!n.has(-r))return-r}}},{key:"parseBendinDW",value:function(e){var t=e.sourceID,a=e.targetID,n=e.type,r=e.bendWeight,o=e.bendDistance,i=e.bendPoint;if("ordin"!==n)return{bendDistance:0,bendWeight:0};if(o&&r)return{bendDistance:o,bendWeight:r};if(i){var c=i.x,s=i.y,l=_calculations_bending_dist_weight__WEBPACK_IMPORTED_MODULE_6__.a.getWeightDistance({x:c,y:s},this.getById(t).position(),this.getById(a).position());return{bendDistance:l.d,bendWeight:l.w}}return{bendDistance:this.getBendingD(t,a),bendWeight:.5}}},{key:"addEdgeWithLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid(),a=e.type,n=void 0===a?"ordin":a,r=this.parseBendinDW(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},e),e.bendData)),o=this.cy.add({group:"edges",data:Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},e),{},{source:e.sourceID,target:e.targetID,type:n,bendData:r})});return this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.DEL_EDGE,parameters:[o.id()]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.ADD_EDGE,parameters:[Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},e),{},{id:o.id()})]},t),o}},{key:"addEdge",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid();if(e.type&&"ordin"!==e.type||e.label)return this.addEdgeWithLabel(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},e),{},{type:e.type||"ordin"}),a);this.dispatcher({type:_reducer__WEBPACK_IMPORTED_MODULE_8__.a.Model_Open_Create_Edge,cb:function(n,r){var o=t.validiateEdge(n,r,e.targetID,e.targetID,null,"New");return o.ok&&t.addEdgeWithLabel(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},e),{},{type:e.type||"ordin"}),a),o}})}},{key:"getStyle",value:function(e){return this.getById(e).data("style")}},{key:"getLabel",value:function(e){return this.getById(e).data("label")||this.getById(e).data("label")}},{key:"updateNode",value:function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getTid();this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_NODE,parameters:[e,this.getStyle(e),this.getById(e).data("label"),n]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_NODE,parameters:[e,t,a,n]},r),n&&this.getById(e).data("label",a),this.getById(e).data("style",t)}},{key:"updateEdge",value:function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getTid();this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_EDGE,parameters:[e,this.getStyle(e),this.getById(e).data("label"),n]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_EDGE,parameters:[e,t,a,n]},r),n&&this.getById(e).data("label",a),this.getById(e).data("style",t)}},{key:"updateData",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getTid();return this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_DATA,parameters:[e,t,this.getById(e).data(t)]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_DATA,parameters:[e,t,a]},n),this.getById(e).data(t,a),this}},{key:"deleteNode",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid(),n=this.getById(e);n.connectedEdges('[type="ordin"]').forEach((function(e){return t.deleteEdge(e.id(),a)})),n.connectedEdges().forEach((function(e){return t.deleteEdge(e.id(),a)})),this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.ADD_NODE,parameters:[n.data("label"),this.getStyle(n.id()),n.data("type"),n.position(),n.json().data,e]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.DEL_NODE,parameters:[e]},a),n.remove()}},{key:"deleteEdge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid();if(0!==this.getById(e).length&&!this.getById(e).removed()){var a=this.getById(e).json();this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.ADD_EDGE,parameters:[Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},a.data),{},{sourceID:a.data.source,targetID:a.data.target})]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.DEL_EDGE,parameters:[e]},t),this.getById(e).remove()}}},{key:"deleteElem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid();return this.getById(e).isNode()?this.deleteNode(e,t):this.deleteEdge(e,t)}},{key:"setPos",value:function(e,t){this.getById(e).position(t),this.getById(e).emit("moved")}},{key:"setDim",value:function(e,t,a){var n=this.getById(e).data("style");this.getById(e).data("style",Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},n),{},{height:t.height,width:t.width})),this.setPos(e,a)}},{key:"getNodeValidator",value:function(){var e=[this.nodeValidator.toString().indexOf("{"),this.nodeValidator.toString().lastIndexOf("}")],t=e[0],a=e[1];return this.nodeValidator.toString().slice(t+1,a).trim()}},{key:"getEdgeValidator",value:function(){var e=[this.edgeValidator.toString().indexOf("{"),this.edgeValidator.toString().lastIndexOf("}")],t=e[0],a=e[1];return this.edgeValidator.toString().slice(t+1,a).trim()}},{key:"setEdgeNodeValidator",value:function setEdgeNodeValidator(_ref4){var nodeValidator=_ref4.nodeValidator,edgeValidator=_ref4.edgeValidator;this.nodeValidator=eval(nodeValidator),this.edgeValidator=eval(edgeValidator)}},{key:"getNodesEdges",value:function(){var e=this;return[this.cy.$('node[type="ordin"]').map((function(e){return{label:e.data("label"),style:e.data("style"),id:e.data("id")}})),this.cy.$('edge[type="ordin"]').map((function(t){return{label:t.data("label"),sourceLabel:e.getById(e.getRealSourceId(t.source().id())).data("label"),targetLabel:t.target().data("label"),style:t.data("style"),id:t.data("id")}}))]}},{key:"validiateComp",value:function(e,t,a){var n=this.getNodesEdges(),r=Object(_home_runner_work_concore_editor_concore_editor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(n,2),o=r[0],i=r[1];try{var c=t(e,o,i,a);return c&&void 0!==c.ok&&void 0!==c.err?c:{ok:!1,err:"Invalid return format from the defined validator."}}catch(s){return{ok:!1,err:"Error raised at validator: ".concat(s.message)}}}},{key:"validiateNode",value:function(e,t,a,n){if(a){var r=this.getById(a);return this.validiateComp({label:e||r.data("label"),style:t||r.data("style"),id:a},this.nodeValidator,n)}return this.validiateComp({label:e,style:t,id:a},this.nodeValidator,n)}},{key:"validiateEdge",value:function(e,t,a,n,r,o){if(r){var i=this.getById(r);return this.validiateComp({label:e||i.data("label"),style:t||i.data("style"),sourceLabel:this.getById(this.getRealSourceId(i.source().id())).data("label"),targetLabel:i.target().data("label"),id:r},this.edgeValidator,o)}return this.validiateComp({label:e,style:t,sourceLabel:this.getById(this.getRealSourceId(a)).data("label"),targetLabel:this.getById(n).data("label"),id:r},this.edgeValidator,o)}}]),GraphComponent}(_2_canvas__WEBPACK_IMPORTED_MODULE_9__.a);__webpack_exports__.a=GraphComponent},178:function(e,t,a){"use strict";var n=a(19),r=a(22),o=a(33),i=a(23),c=a(35),s=a(36),l=a(3),d=a(43),u=a.n(d),p=a(162),h=a.n(p),b=a(163),_=a.n(b),f=a(164),y=a.n(f),O=a(165),g=a.n(O),j=a(166),m=a.n(j),E=a(59),v=a(47),x=a(6),S=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"resetZoom",value:function(){this.cy.reset(),this.cy.center(),this.dispatcher({type:x.a.SET_ZOOM_LEVEL,payload:this.getZoom()})}},{key:"setOnZoom",value:function(e){this.cy.removeListener("zoom"),this.setZoomUI=e,this.cy.on("zoom",(function(t){return e(Math.round(100*t.target.zoom()))}))}},{key:"fitZoom",value:function(){this.cy.fit(),this.dispatcher({type:x.a.SET_ZOOM_LEVEL,payload:this.getZoom()})}},{key:"setZoom",value:function(e){this.cy.zoom(e/100)}},{key:"getZoom",value:function(){return Math.round(100*this.cy.zoom())}},{key:"clearAll",value:function(){var e=this;return 0===this.cy.elements().length||!!window.confirm("Do want to clear all elements?")&&(this.cy.elements().forEach((function(t){return e.deleteElem(t.id(),0)})),this.dispatcher({type:x.a.CHANGE_RESET,payload:!0}),this.cy.emit("graph-modified"),!0)}},{key:"resetAllComp",value:function(){this.cy.elements().remove()}},{key:"setCurStatus",value:function(){Object(o.a)(Object(i.a)(a.prototype),"setCurStatus",this).call(this),this.dispatcher({type:x.a.SET_ZOOM_LEVEL,payload:Math.round(100*this.cy.zoom())})}}]),a}(function(){function e(t,a,r,o,i,c,s,d){Object(n.a)(this,e),r&&(this.dispatcher=r),o&&(this.superState=o),"function"!==typeof u()("core","edgehandles")&&u.a.use(h.a),"function"!==typeof u()("core","nodeEditing")&&g()(u.a,m.a,y.a),"function"!==typeof u()("core","gridGuide")&&_()(u.a),this.cy=u()(Object(l.a)(Object(l.a)({},E.a),{},{container:a})),this.id=t,this.projectName=i,this.authorName=d,this.cy.emit("graph-modified"),this.bendNode=this.cy.add({group:"nodes",data:{type:"bend"},classes:["hidden"]}),this.registerEvents(),this.cy.emit("graph-modified"),this.initizialize()}return Object(r.a)(e,[{key:"initizialize",value:function(){var e=this;this.cy.nodeEditing({resizeToContentCueEnabled:function(){return!1},setWidth:function(e,t){e.data("style",Object(l.a)(Object(l.a)({},e.data("style")),{},{width:t}))},setHeight:function(e,t){e.data("style",Object(l.a)(Object(l.a)({},e.data("style")),{},{height:t}))},isNoResizeMode:function(e){return"ordin"!==e.data("type")},isNoControlsMode:function(e){return"ordin"!==e.data("type")}}),this.cy.gridGuide({snapToGridOnRelease:!1,zoomDash:!0,panGrid:!0}),this.cy.edgehandles({preview:!1,handlePosition:function(){return"none"},handleNodes:'node[type = "ordin"],node[type = "special"]',complete:function(t,a,n){n.remove(),e.addEdge({sourceID:t.id(),targetID:a.id()})}})}},{key:"getById",value:function(e){return this.cy.getElementById(e)}},{key:"getLabelFromID",value:function(e){return this.getById(e).data("label")||"**Deleted El**"}},{key:"set",value:function(e){var t=e.cy,a=e.dispatcher,n=e.superState,r=e.projectName,o=e.authorName;a&&(this.dispatcher=a),n&&(this.superState=n),t&&(this.cy=t),r&&(this.projectName=r),o&&(this.authorName=o)}},{key:"setProjectName",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.projectName=e,t&&this.dispatcher({type:x.a.SET_PROJECT_DETAILS,payload:{value:e,graphID:this.id,type:"projectName"}}),this.cy.emit("graph-modified")}},{key:"setProjectAuthor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.authorName=e,t&&this.dispatcher({type:x.a.SET_AUTHOR,payload:{value:e,graphID:this.id,type:"authorName"}}),this.cy.emit("graph-modified")}},{key:"setServerID",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.serverID=e,t&&this.dispatcher({type:x.a.SET_PROJECT_DETAILS,payload:{value:e,graphID:this.id,type:"serverID"}}),this.cy.emit("graph-modified")}},{key:"selectDeselectEventHandler",value:function(){var e,t=this.cy.$(":selected");if(0===t.length)return this.dispatcher({type:x.a.ELE_UNSELECTED});e=t.every((function(e){return e.isNode()}))?"NODE":t.every((function(e){return e.isEdge()}))?"EDGE":"MIX";var a=t.map((function(e){return e.data("id")}));return this.dispatcher({type:x.a.ELE_SELECTED,payload:{ids:a,type:e}})}},{key:"registerEvents",value:function(){var t=this;this.cy.on("select unselect",(function(){return t.selectDeselectEventHandler()})),this.cy.on("grab",'node[type = "ordin"]',(function(e){e.target.forEach((function(e){e.scratch("position",Object(l.a)({},e.position()))}))})),this.cy.on("nodeediting.resizestart",(function(e,t,a){a.scratch("height",a.data("style").height),a.scratch("width",a.data("style").width),a.scratch("position",Object(l.a)({},a.position()))})),this.cy.on("hide-bend remove",(function(){t.bendNode.removeListener("drag grab dragfree"),t.bendNode.addClass("hidden")})),this.cy.on("grabon",(function(e){return"bend"!==e.target[0].data("type")?t.cy.emit("hide-bend"):0})),this.cy.on("freeon",(function(e){return"bend"!==e.target[0].data("type")?t.cy.emit("show-bend"):0})),this.cy.on("click tap",(function(e){e.target===t.cy&&(t.cy.emit("hide-bend"),t.cy.$(".eh-handle").remove())})),this.cy.on("select unselect show-bend",(function(){var e=t.cy.$(":selected");return 1===e.length&&e[0].isEdge()||t.cy.emit("hide-bend"),e.emit("bend-edge")})),this.cy.on("mouseover","edge",(function(e){e.target.emit("bend-edge")})),this.cy.on("bend-edge","edge",(function(a){t.bendNode.hasClass("hidden")||t.cy.emit("hide-bend");var n=a.target;t.bendNode.position(e.getBendEdgePoint(n)),t.bendNode.on("drag",(function(){var e=v.a.getWeightDistance(t.bendNode.position(),n.source().position(),n.target().position());n.data("bendData",{bendDistance:e.d,bendWeight:e.w}),a.target.emit("bending")})),t.bendNode.on("grab",(function(){n.scratch("bendDistWeight",n.data("bendData"))})),t.bendNode.on("dragfree",(function(){var e=n;t.addBendChange(e.id(),e.scratch("bendDistWeight"),n.data("bendData"))})),t.bendNode.removeClass("hidden")}))}},{key:"setBendWightDist",value:function(e,t){this.getById(e).data("bendData",t)}},{key:"setCurStatus",value:function(){this.selectDeselectEventHandler()}},{key:"reset",value:function(){this.resetAllComp(),this.resetAllAction()}}],[{key:"getBendEdgePoint",value:function(e){var t=e.data("bendData"),a=t.bendWeight,n=t.bendDistance,r=parseFloat(a),o=parseFloat(n);return v.a.getCoordinate(r,o,e.source().position(),e.target().position())}}]),e}());t.a=S},191:function(e,t,a){},193:function(e,t,a){},198:function(e,t,a){},204:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},222:function(e,t){},224:function(e,t){},234:function(e,t,a){},290:function(e,t,a){},300:function(e,t,a){},302:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){},308:function(e,t,a){},365:function(e,t,a){},366:function(e,t,a){},378:function(e,t,a){},379:function(e,t,a){},38:function(e,t,a){"use strict";var n,r={ALL_GRAPHS:window.btoa("ALL_GRAPHS"),AUTHOR_NAME:window.btoa("AUTHOR_NAME"),allgs:(n=window.btoa("ALL_GRAPHS"),window.localStorage.getItem(n)||window.localStorage.setItem(n,window.btoa(JSON.stringify([]))),new Set(JSON.parse(window.atob(window.localStorage.getItem(n))))),saveAllgs:function(){window.localStorage.setItem(this.ALL_GRAPHS,window.btoa(JSON.stringify(Array.from(this.allgs))))},addEmptyIfNot:function(){window.localStorage.getItem(this.ALL_GRAPHS)||window.localStorage.setItem(this.ALL_GRAPHS,window.btoa(JSON.stringify([])))},get:function(e){return null===window.localStorage.getItem(e)?null:JSON.parse(window.atob(window.localStorage.getItem(e)))},save:function(e,t){this.addGraph(e);var a=JSON.stringify(t);window.localStorage.setItem(e,window.btoa(a))},remove:function(e){this.allgs.delete(e)&&this.saveAllgs(),localStorage.removeItem(e)},addGraph:function(e){this.allgs.has(e)||(this.allgs.add(e),this.saveAllgs())},getAllGraphs:function(){return JSON.parse(window.atob(window.localStorage.getItem(this.ALL_GRAPHS)))},addToFront:function(e){if(!this.allgs.has(e)){this.allgs.add(e);var t=JSON.parse(window.atob(window.localStorage.getItem(this.ALL_GRAPHS)));t.unshift(e),window.localStorage.setItem(this.ALL_GRAPHS,window.btoa(JSON.stringify(t)))}},getAuthorName:function(){return localStorage.getItem(this.AUTHOR_NAME)||""},setAuthorName:function(e){localStorage.setItem(this.AUTHOR_NAME,e)},clearGraph:function(e){window.localStorage.removeItem(e)},getFileList:function(){return localStorage.getItem("fileList")||""}};t.a=r},384:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(30),i=a.n(o),c=(a(191),a(8)),s=a(24),l=(a(192),a(193),a(73)),d=a(176),u=a(119),p=(a(197),a(198),a(59)),h=a(6),b=a(2),_=p.a.minZoom,f=p.a.maxZoom,y={},O=function(e){var t=e.superState,a=e.dispatcher,n=t.curGraphInstance;if(!n)return Object(b.jsx)(b.Fragment,{});var r=t.zoomLevel;return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"zoom-comp",children:[Object(b.jsx)("div",{role:"button",tabIndex:0,className:"zoom-box zoom-btn",onClick:function(){return n.resetZoom()},onKeyDown:function(e){return" "===e.key&&n.resetZoom()},children:Object(b.jsx)(u.b,{})}),Object(b.jsx)("div",{role:"button",tabIndex:0,className:"zoom-box zoom-btn",onClick:function(){return n.fitZoom()},onKeyDown:function(e){return" "===e.key&&n.resetZoom()},children:Object(b.jsx)(u.a,{})}),Object(b.jsxs)("div",{className:"zoom-box zoom-value",children:[r,"%"]}),Object(b.jsx)("div",{className:"slider",children:Object(b.jsx)(d.a,{min:100*_,max:100*f,marks:y,onChange:function(e){n.setZoom(e),a({type:h.a.SET_ZOOM_LEVEL,payload:e})},included:!1,value:r})})]})})},g=(a(207),a(38)),j=a(80),m=a(51),E=a(21),v=a.n(E),x=a(34),S=a(76),D=a.n(S),I=a(19),N=a(22),A=function(){function e(t){Object(I.a)(this,e),this.arr=[t],this.flatenArr()}return Object(N.a)(e,[{key:"flatenArr",value:function(){for(var e=this,t=[],a=0;a<this.arr.length;a+=1)this.arr[a].constructor===Array?this.arr[a].forEach((function(t){return e.arr.push(t)})):t.push(this.arr[a]);this.arr=t}},{key:"G",value:function(t){return new e(this.arr.map((function(e){return e[t]})).filter((function(e){return e})))}},{key:"S",value:function(e){return this.arr=this.arr.map((function(t){return t[e]})).filter((function(e){return e})),this.flatenArr(),this}},{key:"any",value:function(){var e=[];return this.arr.forEach((function(t){Object.keys(t).forEach((function(a){e.push(t[a])}))})),this.arr=e,this.flatenArr(),this}},{key:"parseProps",value:function(t,a){var n=new e(this.arr);return t.split(".").forEach((function(e){return"*"===e?n.any():n.S(e)})),1===a?n.A():2===a?n:n.F()}},{key:"A",value:function(){return this.arr}},{key:"F",value:function(){return this.arr[0]}}]),e}(),k=function(e,t,a){return t.includes(e)?e:a},T=function(e){var t=new A(e).parseProps("data.y:ShapeNode",2);return{label:t.parseProps("y:NodeLabel._")||t.parseProps("y:NodeLabel"),id:new A(e).parseProps("$.id"),position:{x:parseFloat(t.parseProps("y:Geometry.$.x")),y:parseFloat(t.parseProps("y:Geometry.$.y"))},style:{width:parseFloat(t.parseProps("y:Geometry.$.width")),height:parseFloat(t.parseProps("y:Geometry.$.height")),opacity:parseInt(t.parseProps("y:Fill.$.opacity"),10)||1,shape:k(t.parseProps("y:Shape.$.type"),["rectangle","ellipse"],"rectangle"),backgroundColor:t.parseProps("y:Fill.$.color"),borderColor:t.parseProps("y:BorderStyle.$.color"),borderWidth:parseInt(t.parseProps("y:BorderStyle.$.width"),10)}}},w=function(e){return{label:new A(e).parseProps("data.*.y:EdgeLabel._")||new A(e).parseProps("data.*.y:EdgeLabel"),source:new A(e).parseProps("$.source"),target:new A(e).parseProps("$.target"),style:{backgroundColor:new A(e).parseProps("data.*.y:LineStyle.$.color"),thickness:parseFloat(new A(e).parseProps("data.*.y:LineStyle.$.width")),shape:k(new A(e).parseProps("data.*.y:LineStyle.$.type"),["dashed","dotted"],"solid")},bendData:{bendPoint:new A(e).parseProps("data.*.y:Path.y:Point.$")}}},L=function(e){var t=e.actionName,a=e.parameters;return{actionName:t[0],parameters:a[0]}},C=function(e){return new Promise((function(t){(new D.a.Parser).parseString(e,(function(e,a){var n=new A(a),r=n.parseProps("graphml.graph.node",1).map(T),o=n.parseProps("graphml.graph.edge",1).map(w),i=function(e){return e.parseProps("graphml.graph.$")}(n),c=i.id,s=i.projectName,l=i.serverID,d=i.authorName,u=function(e){return e.parseProps("graphml.graph.actionHistory",1).map((function(e){var t=e.equivalent,a=e.inverse,n=e.tid;return{equivalent:L(t[0]),inverse:L(a[0]),tid:n[0]}}))}(n);t({id:c,projectName:s,edges:o,nodes:r,actionHistory:u,serverID:l,authorName:d})}))}))},M=function(e){return e.curGraphInstance},P=function(e,t){t({type:h.a.Model_Open_Create_Node,cb:function(t,a){var n=M(e).validiateNode(t,a,null,"New");return n.ok&&M(e).addNode(t,a),n}})},G=function(e,t){var a=1===e.eleSelectedPayload.ids.length,n=(new Date).getTime();"NODE"===e.eleSelectedPayload.type&&t({type:h.a.Model_Open_Update_Node,cb:function(t,r){var o={ok:!0,err:null};return e.eleSelectedPayload.ids.forEach((function(n){var i=M(e).validiateNode(a?t:null,r,n,"Update");o.ok=o.ok&&i.ok,o.err=o.err||i.err})),o.ok&&e.eleSelectedPayload.ids.forEach((function(o){return M(e).updateNode(o,r,t,a,n)})),o},labelAllowed:a,label:M(e).getLabel(e.eleSelectedPayload.ids[0]),style:M(e).getStyle(e.eleSelectedPayload.ids[0])}),"EDGE"===e.eleSelectedPayload.type&&t({type:h.a.Model_Open_Update_Edge,cb:function(t,r){var o={ok:!0,err:null};return e.eleSelectedPayload.ids.forEach((function(n){var i=M(e).validiateEdge(a?t:null,r,null,null,n,"Update");o.ok=o.ok&&i.ok,o.err=o.err||i.err})),o.ok&&e.eleSelectedPayload.ids.forEach((function(o){return M(e).updateEdge(o,r,t,a,n)})),o},labelAllowed:a,label:M(e).getLabel(e.eleSelectedPayload.ids[0]),style:M(e).getStyle(e.eleSelectedPayload.ids[0])})},R=function(e,t,a){M(e).downloadImg(a)};function B(e){return W.apply(this,arguments)}function W(){return(W=Object(x.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.curGraphInstance){e.next=16;break}if(!(a=t.graphs[t.curGraphIndex]).fileHandle){e.next=13;break}return e.next=5,a.fileHandle.createWritable();case 5:return n=e.sent,e.next=8,n.write(M(t).saveToFolder());case 8:return e.next=10,n.close();case 10:s.b.success("File saved Successfully"),e.next=14;break;case 13:a.fileHandle?s.b.info("Switch to Edge/Chrome!"):M(t).saveWithoutFileHandle();case 14:e.next=17;break;case 16:s.b.info("Switch to Edge/Chrome!");case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(){var e=Object(x.a)(v.a.mark((function e(t,a,n,r){var o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}if(o=new FileReader,i=n.name,"graphml"!==n.name.split(".").pop()){e.next=14;break}if(o.onload=function(e){C(e.target.result).then((function(t){var o=t.authorName;a({type:h.a.ADD_GRAPH,payload:{projectName:i,graphML:e.target.result,fileHandle:r,fileName:n.name,authorName:o}})}))},!r){e.next=13;break}return e.t0=o,e.next=9,r.getFile();case 9:e.t1=e.sent,e.t0.readAsText.call(e.t0,e.t1),e.next=14;break;case 13:o.readAsText(n);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),F=function(e,t,a,n){a&&t({type:h.a.EDIT_TEXTFILE,payload:{show:!0,fileObj:a,fileHandle:n}})},H=function(e,t){t({type:h.a.EDIT_TEXTFILE,payload:{show:!0}})},K=function(e,t){t({type:h.a.NEW_GRAPH})},z=function(e){M(e).clearAll()},V=function(e){M(e).resetAfterClear()},$=function(e){M(e)&&M(e).undo()},q=function(e){M(e).redo()},J=function(e,t){t({type:h.a.SET_HISTORY_MODAL,payload:!0})},Z=(a(234),void 0),X=function(e){var t=e.superState,a=e.dispatcher,n=function(e,n){n.stopPropagation(),window.confirm("Do you confirm to close the tab? This action is irreversable.")&&(g.a.remove(t.graphs[e]?t.graphs[e].graphID:null),a({type:h.a.REMOVE_GRAPH,payload:e}),t.curGraphIndex||1!==t.graphs.length||(a({type:h.a.SET_CUR_INSTANCE,payload:null}),a({type:h.a.SET_CUR_INDEX,payload:-1})))},o=function(e){e.stopPropagation(),a({type:h.a.SET_EDIT_DETAILS_MODAL,payload:!0})};return r.a.useEffect((function(){Object(m.a)("ctrl+shift+m,command+shift+m",(function(e){e.preventDefault(),document.getElementById("new_graph").click()})),Object(m.a)("ctrl+shift+e,command+shift+e",(function(e){e.preventDefault();var t=document.querySelector(".tab.tab-graph.selected > .tab-act.edit");t&&t.click()})),Object(m.a)("ctrl+shift+l,command+shift+l",(function(e){e.preventDefault();var t=document.querySelector(".tab.tab-graph.selected > .tab-act.close");t&&t.click()}))}),[]),Object(b.jsxs)("div",{className:"tab-par",children:[Object(b.jsx)("button",{className:"tab",onClick:K.bind(Z,t,a),type:"button",id:"new_graph","data-tip":"New Workflow Tab (Ctrl + Shift + M)",children:Object(b.jsx)(j.a,{size:25})}),t.graphs.map((function(e,r){return Object(b.jsxs)("div",{className:"tab tab-graph ".concat(t.curGraphIndex===r?"selected":"none"),onClick:function(){return a({type:h.a.CHANGE_TAB,payload:r})},onKeyDown:function(e){return" "===e.key&&a({type:h.a.CHANGE_TAB,payload:r})},role:"button",tabIndex:0,id:"tab_".concat(r),children:[Object(b.jsx)("span",{className:"tab-text",children:e.fileName||e.projectName}),t.curGraphIndex===r?Object(b.jsx)("button",{className:"tab-act edit",onClick:o,type:"button","data-tip":"Edit Workflow Details (Ctrl + Shift + E)","data-for":"header-tab",children:Object(b.jsx)(j.c,{size:16})}):Object(b.jsx)(b.Fragment,{}),Object(b.jsx)("button",{className:"tab-act close",onClick:n.bind(Z,r),type:"button","data-tip":"Close current Workflow (Ctrl + Shift + L)","data-for":"header-tab",children:Object(b.jsx)(j.b,{size:20})}),Object(b.jsx)(l.a,{place:"bottom",type:"dark",effect:"solid",id:"header-tab"})]},e.graphID)}))]})},Y=a(3),Q=a(33),ee=a(23),te=a(35),ae=a(36),ne=a(403),re=a(52),oe=function(e){var t=e.label,a=e.id,n=e.posX,r=e.posY,o=e.width,i=e.height,c=e.opacity,s=e.shape;return{$:{id:a},data:[{$:{key:"d6"},"y:ShapeNode":[{"y:Geometry":[{$:{height:i,width:o,x:n,y:r}}],"y:Fill":[{$:{color:e.backgroundColor,opacity:c}}],"y:BorderStyle":[{$:{color:e.borderColor,width:e.borderWidth}}],"y:NodeLabel":[t],"y:Shape":[{$:{type:s}}]}]}]}},ie=function(e){var t=e.nodes,a=e.edges,n=e.id,r=e.projectName,o=e.authorName,i=e.actionHistory;return{graphml:{$:{xmlns:"http://graphml.graphdrawing.org/xmlns","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd","xmlns:y":"http://www.yworks.com/xml/graphml"},key:[{$:{for:"node",id:"d6","yfiles.type":"nodegraphics"}},{$:{for:"edge",id:"d10","yfiles.type":"edgegraphics"}}],graph:[{$:{edgedefault:"directed",id:n,projectName:r,serverID:e.serverID,fileHandle:e.fileHandle,fileName:e.fileName,authorName:o},node:t,edge:a,actionHistory:i}]}}},ce=function(e){var t=e.id,a=e.label,n=e.source,r=e.target,o=e.lineColor,i=e.lineWidth,c=e.bendPoint;return{$:{id:t,source:n,target:r},data:[{$:{key:"d10"},"y:GenericEdge":[{$:{configuration:"com.yworks.bpmn.Connection"},"y:LineStyle":[{$:{color:o,width:i,type:e.type}}],"y:Arrows":[{$:{source:"none",target:"delta"}}],"y:EdgeLabel":[a],"y:Path":[{$:{sx:"0.0",sy:"0.0",tx:"0.0",ty:"0.0"},"y:Point":[{$:c}]}]}]}]}},se=function(e){var t=e.nodes.map((function(e){return oe(Object(Y.a)({label:e.label,id:e.id,posX:e.position.x,posY:e.position.y},e.style))})),a=e.edges.map((function(e,t){return ce({id:t,label:e.label,source:e.source,target:e.target,lineColor:e.style.backgroundColor,lineWidth:e.style.thickness,bendPoint:e.bendData.bendPoint,type:e.style.shape})})),n=ie({nodes:t,edges:a,projectName:e.projectName,id:e.id,actionHistory:e.actionHistory,serverID:e.serverID,fileHandle:e.fileHandle,fileName:e.fileName,authorName:e.authorName});return(new D.a.Builder).buildObject(n)},le=a(47),de=a(13),ue=a(10),pe=a(160),he=a.n(pe),be=a(161),_e=a(11),fe=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"set",value:function(e){var t=e.serverID;Object(Q.a)(Object(ee.a)(a.prototype),"set",this).call(this,e),t&&(this.setServerID(t),this.dispatcher({type:h.a.IS_WORKFLOW_ON_SERVER,payload:Boolean(this.serverID)}))}},{key:"build",value:function(){var e=this;this.dispatcher({type:h.a.SET_LOADER,payload:!0}),ne.a.post("http://127.0.0.1:5000/build/".concat(this.superState.uploadedDirName,"?fetch=").concat(this.superState.graphs[this.superState.curGraphIndex].fileName.split(".")[0],"&unlock=").concat(this.superState.unlockCheck,"&docker=").concat(this.superState.dockerCheck,"&maxtime=").concat(this.superState.maxTime,"&params=").concat(this.superState.params,"&octave=").concat(this.superState.octave)).then((function(t){s.b.success(t.data.message),e.dispatcher({type:h.a.SET_FUNCTIONS,payload:{built:!1,ran:!1,debugged:!0,cleared:!1,stopped:!1,destroyed:!0}}),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})).catch((function(t){s.b.error(t.message),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})),this.serverID}},{key:"debug",value:function(){var e=this;this.dispatcher({type:h.a.SET_LOADER,payload:!0}),ne.a.post("http://127.0.0.1:5000/debug/".concat(this.superState.graphs[this.superState.curGraphIndex].fileName.split(".")[0])).then((function(t){s.b.success(t.data.message),e.dispatcher({type:h.a.SET_FUNCTIONS,payload:{built:!1,ran:!1,debugged:!1,cleared:!0,stopped:!0,destroyed:!0}}),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})).catch((function(t){s.b.error(t.message),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})),this.serverID}},{key:"run",value:function(){var e=this;this.dispatcher({type:h.a.SET_LOADER,payload:!0}),ne.a.post("http://127.0.0.1:5000/run/".concat(this.superState.graphs[this.superState.curGraphIndex].fileName.split(".")[0])).then((function(t){s.b.success(t.data.message),e.dispatcher({type:h.a.SET_FUNCTIONS,payload:{built:!1,ran:!1,debugged:!1,cleared:!0,stopped:!0,destroyed:!0}}),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})).catch((function(t){s.b.error(t.message),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})),this.serverID}},{key:"clear",value:function(){var e=this;this.dispatcher({type:h.a.SET_LOADER,payload:!0}),ne.a.post("http://127.0.0.1:5000/clear/".concat(this.superState.graphs[this.superState.curGraphIndex].fileName.split(".")[0],"\n        ?unlock=").concat(this.superState.unlockCheck,"&maxtime=").concat(this.superState.maxTime,"&params=").concat(this.superState.params)).then((function(t){s.b.success(t.data.message),e.dispatcher({type:h.a.SET_FUNCTIONS,payload:{built:!1,ran:!0,debugged:!0,cleared:!1,stopped:!0,destroyed:!0}}),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})).catch((function(t){s.b.error(t.message),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})),this.serverID}},{key:"stop",value:function(){var e=this;this.dispatcher({type:h.a.SET_LOADER,payload:!0}),ne.a.post("http://127.0.0.1:5000/stop/".concat(this.superState.graphs[this.superState.curGraphIndex].fileName.split(".")[0])).then((function(t){s.b.success(t.data.message),e.dispatcher({type:h.a.SET_FUNCTIONS,payload:{built:!1,ran:!1,debugged:!1,cleared:!0,stopped:!1,destroyed:!0}}),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})).catch((function(t){s.b.error(t.message),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})),this.serverID}},{key:"destroy",value:function(){var e=this;this.dispatcher({type:h.a.SET_LOADER,payload:!0}),ne.a.delete("http://127.0.0.1:5000/destroy/".concat(this.superState.graphs[this.superState.curGraphIndex].fileName.split(".")[0])).then((function(t){s.b.success(t.data.message),e.dispatcher({type:h.a.SET_FUNCTIONS,payload:{built:!0,ran:!1,debugged:!1,cleared:!1,stopped:!1,destroyed:!1}}),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})).catch((function(t){s.b.error(t.message),e.dispatcher({type:h.a.SET_LOADER,payload:!1})})),this.serverID}},{key:"setCurStatus",value:function(){Object(Q.a)(Object(ee.a)(a.prototype),"setCurStatus",this).call(this),this.dispatcher({type:h.a.IS_WORKFLOW_ON_SERVER,payload:Boolean(this.serverID)})}}]),a}(function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).autoSaveIntervalId=null,e}return Object(N.a)(a,[{key:"registerEvents",value:function(){var e=this;Object(Q.a)(Object(ee.a)(a.prototype),"registerEvents",this).call(this),this.cy.on("add remove data dragfreeon",'node[type="ordin"]',(function(){return e.saveLocalStorage()})),this.cy.on("add remove data",'edge[type="ordin"]',(function(){return e.saveLocalStorage()})),this.cy.on("nodeediting.resizeend graph-modified",(function(){return e.saveLocalStorage()}))}},{key:"downloadImg",value:function(e){this.cy.emit("hide-bend"),this.cy.$(".eh-handle").remove(),"PNG"===e&&Object(re.saveAs)(this.cy.png({full:!0}),"".concat(this.getName(),"-DHGWorkflow.png")),"JPG"===e&&Object(re.saveAs)(this.cy.jpg({full:!0}),"".concat(this.getName(),"-DHGWorkflow.jpg"))}},{key:"shouldNodeBeSaved",value:function(e){return"ordin"===this.getById(e).data("type")}},{key:"shouldEdgeBeSaved",value:function(e){return"ordin"===this.getById(e).data("type")}},{key:"getRealSourceId",value:function(e){return e}},{key:"jsonifyGraph",value:function(){var e=this,t={nodes:[],edges:[],actionHistory:[],projectName:this.projectName,id:this.id,serverID:this.serverID,fileName:null,fileHandle:null,authorName:this.authorName};return this.cy.nodes().forEach((function(a){if(e.shouldNodeBeSaved(a.id())){var n=a.json(),r={label:n.data.label,id:n.data.id,position:n.position,style:{}};r.style=e.getStyle(a.id()),t.nodes.push(r)}})),this.cy.edges().forEach((function(a){if(e.shouldEdgeBeSaved(a.id())){var n=a.json().data;n.source=e.getRealSourceId(a.source().id()),n.style=e.getStyle(a.id()),n.bendData.bendPoint=le.a.getCoordinate(n.bendData.bendWeight,n.bendData.bendDistance,a.source().position(),a.target().position()),t.edges.push(n)}})),t.actionHistory=this.actionArr.map((function(e){var t=e.tid,n=e.inverse,r=e.equivalent,o=e.hash;return{tid:t,inverse:a.stringifyAction(n),equivalent:a.stringifyAction(r),hash:o}})),t}},{key:"getName",value:function(){return"".concat(this.projectName)}},{key:"saveToDisk",value:function(){var e=Object(x.a)(v.a.mark((function e(){var t,a,n,r,o,i,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=se(this.jsonifyGraph()),a=(new TextEncoder).encode(t),n=new Blob([a],{type:"application/json;charset=utf-8"}),-1===navigator.userAgent.indexOf("Edg")&&-1===navigator.userAgent.indexOf("Chrome")){e.next=17;break}return r={types:[{description:"GraphMl Files",accept:{"text/graphml":[".graphml"]}}]},e.next=7,window.showSaveFilePicker(r);case 7:return o=e.sent,e.next=10,o.createWritable();case 10:return i=e.sent,e.next=13,i.write(n);case 13:return e.next=15,i.close();case 15:e.next=19;break;case 17:c=prompt("Filename:"),Object(re.saveAs)(n,"".concat(c||"".concat(this.getName(),"-concore"),".graphml"));case 19:s.b.success("File saved Successfully");case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveWithoutFileHandle",value:function(){var e=Object(x.a)(v.a.mark((function e(){var t,a,n,r,o,i,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=navigator,!t.userAgent.match(/firefox|fxios/i)){e.next=4;break}return s.b.info("Switch to Edge/Chrome!"),e.abrupt("return");case 4:return a=se(this.jsonifyGraph()),n=(new TextEncoder).encode(a),r=new Blob([n],{type:"application/json;charset=utf-8"}),o={types:[{description:"GraphMl Files",accept:{"text/graphml":[".graphml"]}}]},e.next=10,window.showSaveFilePicker(o);case 10:return i=e.sent,this.dispatcher({type:h.a.SET_FILE_HANDLE,payload:{curGraphIndex:this.superState.curGraphIndex,fileHandle:i}}),e.next=14,i.createWritable();case 14:return c=e.sent,e.next=17,c.write(r);case 17:return e.next=19,c.close();case 19:s.b.success("File saved Successfully");case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveToFolder",value:function(){return se(this.jsonifyGraph())}},{key:"getGraphML",value:function(){return se(this.jsonifyGraph())}},{key:"loadJson",value:function(e){var t=this;e.nodes.forEach((function(e){t.addNode(e.label,e.style,"ordin",e.position,{},e.id,0)})),e.edges.forEach((function(e){t.addEdge(Object(Y.a)(Object(Y.a)({},e),{},{sourceID:e.source,targetID:e.target}),0)})),e.actionHistory.forEach((function(e){var n=e.inverse,r=e.equivalent,o=e.tid;t.addAction(a.parseAction(n),a.parseAction(r),o)})),this.setProjectName(e.projectName),this.setServerID(this.serverID||e.serverID),this.setProjectAuthor(e.authorName)}},{key:"saveLocalStorage",value:function(){var e=this;null!==this.autoSaveIntervalId&&clearTimeout(this.autoSaveIntervalId),this.autoSaveIntervalId=setTimeout((function(){return g.a.save(e.id,e.jsonifyGraph())}),1e3)}},{key:"setGraphML",value:function(e){var t=this;C(e).then((function(e){g.a.save(t.id,e),t.loadGraphFromLocalStorage()}))}},{key:"resetLocalStorage",value:function(){g.a.clearGraph(this.id)}},{key:"loadGraphFromLocalStorage",value:function(){this.reset();var e=g.a.get(this.id);return!!e&&(this.loadJson(e),!0)}},{key:"serializeGraph",value:function(){return window.btoa(JSON.stringify(this.jsonifyGraph()))}}],[{key:"stringifyAction",value:function(e){var t=e.actionName,a=e.parameters;return{actionName:t,parameters:window.btoa(JSON.stringify(a))}}},{key:"parseAction",value:function(e){var t=e.actionName,a=e.parameters;return{actionName:t,parameters:JSON.parse(window.atob(a))}}}]),a}(function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){var e,n;Object(I.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))).methodsMapped=(e={},Object(ue.a)(e,_e.a.ADD_NODE,(function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n).addNode.apply(e,a.concat([0]))})),Object(ue.a)(e,_e.a.ADD_EDGE,(function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n).addEdge.apply(e,a.concat([0]))})),Object(ue.a)(e,_e.a.UPDATE_NODE,(function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n).updateNode.apply(e,a.concat([0]))})),Object(ue.a)(e,_e.a.UPDATE_EDGE,(function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n).updateEdge.apply(e,a.concat([0]))})),Object(ue.a)(e,_e.a.UPDATE_DATA,(function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n).updateData.apply(e,a.concat([0]))})),Object(ue.a)(e,_e.a.DEL_NODE,(function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n).deleteNode.apply(e,a.concat([0]))})),Object(ue.a)(e,_e.a.DEL_EDGE,(function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n).deleteElem.apply(e,a.concat([0]))})),Object(ue.a)(e,_e.a.SET_POS,(function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n).setPos.apply(e,a.concat([0]))})),Object(ue.a)(e,_e.a.SET_DIM,(function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n).setDim.apply(e,a.concat([0]))})),Object(ue.a)(e,_e.a.SET_BENDW,(function(){var e;return(e=n).setBendWightDist.apply(e,arguments)})),e),n.actionArr=[],n.curActionIndex=0,n}return Object(N.a)(a,[{key:"resetAllAction",value:function(){this.actionArr=[],this.curActionIndex=0}},{key:"informUI",value:function(){this.dispatcher({type:h.a.SET_UNDO,payload:0!==this.curActionIndex}),this.dispatcher({type:h.a.SET_REDO,payload:this.curActionIndex!==this.actionArr.length})}},{key:"performAction",value:function(e){var t=e.actionName,a=e.parameters;this.methodsMapped[t].apply(void 0,Object(de.a)(a))}},{key:"addPositionChange",value:function(e,t,a){var n=(new Date).getTime();this.addAction({actionName:_e.a.SET_POS,parameters:[e,t,a]},{actionName:_e.a.SET_POS,parameters:[e,a,t]},n)}},{key:"addDimensionChange",value:function(e,t,a,n,r){var o=(new Date).getTime();this.addAction({actionName:_e.a.SET_DIM,parameters:[e,t,a]},{actionName:_e.a.SET_DIM,parameters:[e,n,r]},o)}},{key:"addBendChange",value:function(e,t,a){var n=(new Date).getTime();this.addAction({actionName:_e.a.SET_BENDW,parameters:[e,t]},{actionName:_e.a.SET_BENDW,parameters:[e,a]},n)}},{key:"addAction",value:function(e,t,n){if(0!==n){this.actionArr.splice(this.curActionIndex);var r=a.sequencify(t).toString()+a.sequencify(t).toString()+n;this.actionArr.push({tid:n,inverse:e,equivalent:t,hash:he()("".concat(r,"|").concat(this.actionArr.length?this.actionArr.at(-1).hash:""))}),this.curActionIndex+=1,this.informUI()}}},{key:"undoSingleAction",value:function(){0!==this.curActionIndex&&(this.curActionIndex-=1,this.performAction(this.actionArr[this.curActionIndex].inverse),this.informUI())}},{key:"redoSingleAction",value:function(){this.curActionIndex!==this.actionArr.length&&(this.performAction(this.actionArr[this.curActionIndex].equivalent),this.curActionIndex+=1,this.informUI())}},{key:"undo",value:function(){var e=null;for(0!==this.curActionIndex&&(e=this.actionArr[this.curActionIndex-1].tid);0!==this.curActionIndex&&this.actionArr[this.curActionIndex-1].tid===e;)this.curActionIndex-=1,this.performAction(this.actionArr[this.curActionIndex].inverse);this.informUI()}},{key:"redo",value:function(){var e=null;for(this.curActionIndex!==this.actionArr.length&&(e=this.actionArr[this.curActionIndex].tid);this.curActionIndex!==this.actionArr.length&&this.actionArr[this.curActionIndex].tid===e;)this.performAction(this.actionArr[this.curActionIndex].equivalent),this.curActionIndex+=1;this.informUI()}},{key:"resetAfterClear",value:function(){var e=this.curActionIndex;for(this.curActionIndex=0;this.curActionIndex!==this.actionArr.length&&this.curActionIndex!==e;)this.performAction(this.actionArr[this.curActionIndex].equivalent),this.curActionIndex+=1;return this.informUI(),this.dispatcher({type:h.a.CHANGE_RESET,payload:!1}),!0}},{key:"setCurStatus",value:function(){Object(Q.a)(Object(ee.a)(a.prototype),"setCurStatus",this).call(this),this.informUI()}},{key:"registerEvents",value:function(){var e=this;Object(Q.a)(Object(ee.a)(a.prototype),"registerEvents",this).call(this),this.cy.on("dragfree",'node[type = "ordin"]',(function(t){t.target.forEach((function(t){e.addPositionChange(t.id(),t.scratch("position"),Object(Y.a)({},t.position()))}))})),this.cy.on("nodeediting.resizeend",(function(t,a,n){e.addDimensionChange(n.id(),{height:n.scratch("height"),width:n.scratch("width")},n.scratch("position"),{height:n.data("style").height,width:n.data("style").width},Object(Y.a)({},n.position()))}))}}],[{key:"sequencify",value:function(e){if(!(e instanceof Object))return e;var t=[];return e instanceof Array?t=e.map(a.sequencify):Object.keys(e).sort().forEach((function(n){t.push(":".concat(n,":")),t.push(a.sequencify(e[n]))})),t}}]),a}(be.a))),ye={getEq:function(e,t){var a=(e.y-t.y)/(e.x-t.x);return[a,e.y-a*e.x]},getX1X2:function(e,t,a,n){if(e.x===t.x)return[t.x,t.x];var r={x:t.x-e.x,y:t.y-e.y},o=this.getEq({x:0,y:0},r),i=Object(c.a)(o,2),s=i[0],l=i[1],d=Math.pow(a,2)*Math.pow(s,2)+Math.pow(n,2),u=2*Math.pow(a,2)*s*l,p=Math.pow(a,2)*(Math.pow(l,2)-Math.pow(n,2)),h=Math.pow(u,2)-4*d*p;return[(-u+Math.pow(h,.5))/(2*d)+e.x,(-u-Math.pow(h,.5))/(2*d)+e.x]},getY1Y2:function(e,t,a,n,r,o){if(r===o)return[e.y+n,e.y-n];var i=this.getEq(e,t),s=Object(c.a)(i,2),l=s[0],d=s[1];return[l*r+d,l*o+d]},dist:function(e,t){return Math.pow(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),.5)},getClosestEllipse:function(e,t,a,n){var r=this.getX1X2(e,t,a,n),o=Object(c.a)(r,2),i=o[0],s=o[1],l=this.getY1Y2(e,t,a,n,i,s),d=Object(c.a)(l,2),u=d[0],p=d[1],h=[this.dist(t,{x:i,y:u}),this.dist(t,{x:s,y:p})];return h[0]<h[1]?{x:i,y:u}:{x:s,y:p}},slope:function(e,t,a,n){return(e-a)/(t-n)},setSubQ:function(e,t,a,n){var r=[[e.x+a,e.y+n],[e.x+a,e.y-n]].map((function(a){var n=Object(c.a)(a,2),r=n[0],o=n[1];return(e.x-r)*(t.y-o)-(e.y-o)*(t.x-r)>0})),o=Object(c.a)(r,2),i=o[0],s=o[1];return i&&!s?0:i||s?!i&&s?2:i&&s?3:-1:1},getClosestRect:function(e,t,a,n){var r=this.getEq(t,e),o=Object(c.a)(r,2),i=o[0],s=o[1],l=[[e.x+a,e.y],[e.x,e.y+n],[e.x-a,e.y],[e.x,e.y-n]];Math.abs(i)!==1/0&&(l=[[e.x+a,i*(e.x+a)+s],[(e.y+n-s)/i,e.y+n],[e.x-a,i*(e.x-a)+s],[(e.y-n-s)/i,e.y-n]]);var d=Object(c.a)(l[this.setSubQ(e,t,a,n)],2);return{x:d[0],y:d[1]}},get:function(e,t,a,n,r){return"rectangle"===r?ye.getClosestRect(e,t,a,n):ye.getClosestEllipse(e,t,a,n)}},Oe=ye.get,ge=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"registerEvents",value:function(){Object(Q.a)(Object(ee.a)(a.prototype),"registerEvents",this).call(this),this.cy.on("drag data moved",'node[type="ordin"]',(function(e){e.target.connectedEdges().connectedNodes('node[type="special"]').forEach((function(e){e.position(a.calJuncNodePos(e))}))})),this.cy.on("bending",(function(e){var t=e.target.source();t.position(a.calJuncNodePos(t))}))}},{key:"getRealNode",value:function(e){return this.getById(e).incomers().filter("node")[0]}},{key:"addAutoMove",value:function(e){return e.unselectify(),this}},{key:"addEdgeWithJuncNode",value:function(e,t){var n=this.getById(e.sourceID),r=Object(Q.a)(Object(ee.a)(a.prototype),"addEdge",this).call(this,Object(Y.a)(Object(Y.a)({},e),{},{label:n.data("edgeLabel"),style:n.data("edgeStyle")}),t);return n.position(a.calJuncNodePos(n)),r}},{key:"addEdgeWithoutJuncNode",value:function(e,t){var n=e.sourceID,r=e.targetID,o=e.style,i=[n,r].map(this.getById.bind(this)),s=Object(c.a)(i,2),l=s[0],d=s[1],u=l.data("style"),p=Oe(l.position(),d.position(),u.width/2,u.height/2,u.shape),h=Object(Q.a)(Object(ee.a)(a.prototype),"addNode",this).call(this,"",{backgroundColor:o.backgroundColor},"special",p,{edgeLabel:e.label,edgeStyle:o},void 0,t);return h.ungrabify(),Object(Q.a)(Object(ee.a)(a.prototype),"addEdge",this).call(this,{sourceID:n,targetID:h.id(),style:Object(Y.a)(Object(Y.a)({},o),{},{"target-arrow-shape":"none"}),type:"special"},t),this.addAutoMove(h,l),this.addEdgeWithJuncNode(Object(Y.a)(Object(Y.a)({},e),{},{sourceID:h.id()}),t)}},{key:"addEdgeAction",value:function(e,t,a){this.addAction({actionName:_e.a.DEL_EDGE,parameters:[e]},{actionName:_e.a.ADD_EDGE,parameters:[Object(Y.a)(Object(Y.a)({},t),{},{sourceID:this.getRealSourceId(t.sourceID),id:e})]},a)}},{key:"addEdge",value:function(e){var t,a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid(),r=0,o=e.sourceID,i=e.targetID,s=e.label,l=[o,i].map(this.getById.bind(this)),d=Object(c.a)(l,2),u=d[0],p=d[1],b=u.outgoers("node").filter((function(e){return s&&e.data("edgeLabel")===s}));return"ordin"!==p.data("type")||("special"===u.data("type")?t=this.addEdgeWithJuncNode(e,r):b.length?t=this.addEdgeWithJuncNode(Object(Y.a)(Object(Y.a)({},e),{},{sourceID:b[0].id()}),r):s&&s.length?t=this.addEdgeWithoutJuncNode(e,r):this.dispatcher({type:h.a.Model_Open_Create_Edge,cb:function(c,s){var l=a.validiateEdge(c,s,o,i,null,"New");return l.ok&&(t=a.addEdge(Object(Y.a)(Object(Y.a)({},e),{},{label:c,style:s}),r)),t&&a.addEdgeAction(t.id(),Object(Y.a)(Object(Y.a)({},e),{},{label:c,style:s}),n),l}}),t&&this.addEdgeAction(t.id(),e,n)),t}},{key:"updateEdge",value:function(e,t,n,r){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getTid();this.addAction({actionName:_e.a.UPDATE_EDGE,parameters:[e,this.getStyle(e),this.getById(e).data("label"),r]},{actionName:_e.a.UPDATE_EDGE,parameters:[e,t,n,r]},i);var c=this.getById(e).source();r&&this.updateData(c.data("id"),"edgeLabel",n,0),this.updateData(c.data("id"),"edgeStyle",t,0),this.updateNode(c.data("id"),{backgroundColor:t.backgroundColor},"",!1,0),c.outgoers("edge").forEach((function(e){return Object(Q.a)(Object(ee.a)(a.prototype),"updateEdge",o).call(o,e.data("id"),t,n,r,0)}))}},{key:"deleteElem",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid(),r=this.getById(e);if(r.isNode()){if(r.removed())return;r.outgoers('node[type="special"]').connectedEdges('edge[type="ordin"]').forEach((function(e){return t.deleteElem(e.id(),n)})),r.connectedEdges('edge[type="ordin"]').forEach((function(e){return t.deleteElem(e.id(),n)}));var o=this.getById(e);this.addAction({actionName:_e.a.ADD_NODE,parameters:[o.data("label"),this.getStyle(o.id()),o.data("type"),o.position(),o.json().data,e]},{actionName:_e.a.DEL_NODE,parameters:[e]},n),Object(Q.a)(Object(ee.a)(a.prototype),"deleteNode",this).call(this,e,0)}else{if(!this.getById(e).length||r.removed())return;var i=this.getById(e).json().data;this.addAction({actionName:_e.a.ADD_EDGE,parameters:[Object(Y.a)(Object(Y.a)({},i),{},{sourceID:this.getRealSourceId(i.source),targetID:i.target})]},{actionName:_e.a.DEL_EDGE,parameters:[e]},n);var c=r.source();Object(Q.a)(Object(ee.a)(a.prototype),"deleteEdge",this).call(this,e,0),c&&0===c.outgoers().length&&this.deleteNode(c.id(),0)}}},{key:"getRealSourceId",value:function(e){return"ordin"===this.getById(e).data("type")||0===this.getById(e).incomers("node").length?e:this.getById(e).incomers("node")[0].id()}},{key:"getEdgesBetweenNodes",value:function(e,t){var a=this,n=[e,t].map((function(e){return a.getById(a.getRealSourceId(e))})).map((function(e){return e.outgoers('node[type="special"]').union(e)})),r=Object(c.a)(n,2),o=r[0],i=r[1];return o.edgesWith(i)}},{key:"getNodesEdges",value:function(){var e=this,t=this.cy.$('node[type="ordin"]').map((function(e){return{label:e.data("label"),style:e.data("style"),id:e.data("id")}})),a={};return this.cy.$('edge[type="ordin"]').forEach((function(t){var n=t.data("label"),r=e.getById(e.getRealSourceId(t.source().id())).data("label"),o=t.target().data("label"),i=t.data("style"),c=t.data("id");a[n]?a[n].targetLabel.push(o):a[n]={targetLabel:[o],sourceLabel:r,id:c,label:n,style:i}})),[t,Object.values(a)]}}],[{key:"calJuncNodePos",value:function(e){var t=e.incomers("node")[0],n={x:0,y:0},r=new Set;return e.outgoers('edge[type="ordin"]').forEach((function(e){return r.add(JSON.stringify(a.getBendEdgePoint(e)))})),r.forEach((function(e){var t=JSON.parse(e);n.x+=t.x,n.y+=t.y})),0===r.size?e.position():(n.x/=r.size,n.y/=r.size,Oe(t.position(),n,t.data("style").width/2,t.data("style").height/2,t.data("style").shape))}}]),a}(fe);var je=function(e){var t=e.el,a=e.superState,r=e.dispatcher,o=e.graphID,i=e.serverID,s=e.graphML,l=e.projectName,d=e.graphContainerRef,u=e.active,p=e.authorName,_=Object(n.useState)(null),f=Object(c.a)(_,2),y=f[0],O=f[1],g=Object(n.useRef)(),j=function(e){if(e){var t=e;t.style.width="".concat(d.current.offsetWidth-2,"px"),t.style.height="".concat(d.current.offsetHeight-2,"px")}};Object(n.useEffect)((function(){return y&&y.set({superState:a})}),[y,a]),Object(n.useEffect)((function(){return u&&y&&y.setCurStatus()}),[u&&y]),Object(n.useEffect)((function(){u&&y&&r({type:h.a.SET_CUR_INSTANCE,payload:y})}),[u&&y]),Object(n.useEffect)((function(){g.current&&(j(g.current),window.addEventListener("resize",(function(){return j(g.current)})),O(function(){var e=new ge(o,g.current,r,a,l,"(node, nodes, edges) => {\n    var regex = /^[A-za-z0-9]+[:[A-Za-z0-9.]+]|[^$]$/;\n    let message = { ok: true, err: null };\n    if (!regex.test(node.label)) {\n        message = {\n            ok: false,\n            err: 'Node with incorrect label.',\n        }\n        return message;\n    }\n    nodes.forEach((n) => {\n        if (n.id !== node.id && n.label.split(':')[0] === node.label.split(':')[0]) {\n            message = {\n                ok: false,\n                err: 'Node with same label exists.',\n            };\n        }\n    });\n    return message;\n    }","(edge, nodes, edges) => {\nlet message = { ok: true, err: null };\nedges.forEach((e) => {\n    if (e.label === edge.label && e.sourceLabel !== edge.sourceLabel) {\n        message = {\n            ok: false,\n            err: 'Edge with same label exists.',\n        };\n    }\n});\nreturn message;\n}",p);return o&&e.loadGraphFromLocalStorage(),i&&(e.set({serverID:i}),e.forcePullFromServer()),s&&e.setGraphML(s),e.setCurStatus(),e}()))}),[g]);var m=t.id;return Object(b.jsx)("div",{style:{zIndex:1,display:u?"block":"none"},className:"graph-element",ref:g},m)},me=function(e){var t=r.a.useRef(),a=e.dispatcher,o=e.superState;return Object(n.useEffect)((function(){var e=g.a.getAllGraphs().map((function(e){return{graphID:e}}));a({type:h.a.ADD_GRAPH_BULK,payload:e})}),[]),Object(b.jsxs)("div",{style:{flex:1,flexDirection:"column",display:"flex",width:"100%"},children:[Object(b.jsx)(X,{superState:o,dispatcher:a}),Object(b.jsxs)("div",{style:{flex:1,background:"white"},className:"graph-container",ref:t,children:[o.graphs.map((function(e,n){return Object(b.jsx)(je,{el:e,i:n,superState:o,graphContainerRef:t,dispatcher:a,active:n===o.curGraphIndex,graphID:e.graphID,serverID:e.serverID,graphML:e.graphML,projectName:e.projectName,fileHandle:e.fileHandle,fileName:e.fileName,authorName:e.authorName},e.graphID)})),Object(b.jsx)(O,{dispatcher:a,superState:o})]})]})},Ee=(a(290),a(120)),ve=a.n(Ee);a(300);ve.a.setAppElement("#root");var xe=function(e){var t=e.closeModal,a=e.ModelOpen,r=e.title,o=e.children,i=Object(n.useState)(""),s=Object(c.a)(i,2),l=s[0],d=s[1],u=Object(n.useState)(a),p=Object(c.a)(u,2),h=p[0],_=p[1],f=Object(n.useState)(null),y=Object(c.a)(f,2),O=y[0],g=y[1];return Object(n.useEffect)((function(){!0===a?(_(!0),d("closing"),clearTimeout(O),g(setTimeout((function(){_(!0),d("")}),20))):(d("closing"),clearTimeout(O),g(setTimeout((function(){_(!1)}),400)))}),[a]),h?Object(b.jsx)(ve.a,{isOpen:h,contentLabel:"onRequestClose Example",className:"Modal",overlayClassName:"Overlay ".concat(l),children:Object(b.jsxs)("div",{className:"modal-content ".concat(l),children:[Object(b.jsxs)("div",{className:"modal-header",children:[Object(b.jsx)("div",{className:"modal-title h4",children:r}),Object(b.jsxs)("button",{type:"button",className:"close",onClick:t,children:[t?Object(b.jsx)("span",{"aria-hidden":"true",children:"\xd7"}):"",Object(b.jsx)("span",{className:"sr-only",children:"Close"})]})]}),Object(b.jsx)("div",{className:"modal-body",children:o})]})}):""},Se=function(e){var t=e.closeModal,a=e.superState,r=e.dispatcher,o=Object(n.useState)({}),i=Object(c.a)(o,2),l=i[0],d=i[1],u=Object(n.useState)(""),p=Object(c.a)(u,2),_=p[0],f=p[1],y=Object(n.useState)(null),O=Object(c.a)(y,2),g=O[0],j=O[1],m=Object(n.useState)(!1),E=Object(c.a)(m,2),S=E[0],D=E[1],I=Object(n.useState)(!1),N=Object(c.a)(I,2),A=N[0],k=N[1],T=Object(n.useState)(!1),w=Object(c.a)(T,2),L=w[0],C=w[1],M=a.modalPayload,P=a.ModelOpen,G=M.cb,R=M.title,B=M.submitText,W=M.Children,U=M.defaultStyle,K=M.defaultLabel,z=M.labelAllowed,V=M.type;Object(n.useEffect)((function(){f("")}),[P]),Object(n.useEffect)((function(){d({label:K||"",style:U}),f("")}),[K,U]);Object(n.useEffect)((function(){A&&H(0,r),S&&null===g?s.b.error("Respective file is not present in same directory"):null!==g&&F(0,r,g.fileObj,g.fileHandle),D(!1),k(!1)}),[A,S]),Object(n.useEffect)((function(){L&&H(0,r),C(!1)}),[L]);var $=function(){var e=Object(x.a)(v.a.mark((function e(){var t,n,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r({type:h.a.SET_MARKDOWN_MODAL,payload:!0}),j(null),void 0===a.fileState||""===l.label){e.next=18;break}if(t=l.label.split(":")[1].split(".")[0].concat(".md"),!(n=a.fileState.find((function(e){return e.key.split("/")[1]===t})))){e.next=18;break}if((o=new FileReader).onload=function(e){r({type:h.a.SET_INPUT_FILE,payload:{content:e.target.result,fname:n.key.split("/")[1]}})},!n.fileHandle){e.next=16;break}return e.t0=o,e.next=12,n.fileHandle.getFile();case 12:e.t1=e.sent,e.t0.readAsText.call(e.t0,e.t1),e.next=17;break;case 16:n.fileObj&&o.readAsText(n.fileObj);case 17:j(n);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(xe,{closeModal:t,ModelOpen:P,title:R,children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=G(l.label,l.style);a.ok?(f(""),d({label:K||"",style:U}),t()):f(a.err)},children:[Object(b.jsxs)("div",{className:"modal-content-body",children:[Object(b.jsx)(W,{data:l,setData:d,labelAllowed:z,state:a}),_?Object(b.jsx)("div",{className:"err",children:_}):Object(b.jsx)(b.Fragment,{})]}),Object(b.jsxs)("div",{className:"modal-footer",children:[Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:B}),"Node"===V?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){if(j(null),void 0!==a.fileState&&""!==l.label){var e=l.label.split(":")[1];a.fileState.forEach((function(t){t.key.split("/")[1]!==e&&t.key.split("/")[2]!==e||j(t)}))}"Edit Node"===B?D(!0):"Create Node"===B&&k(!0)},children:"Edit Node"===B?"Edit Source":"Create Source"}),"Edit Node"===R?Object(b.jsx)("button",{className:"btn btn-primary",type:"button",onClick:$,children:"Help"}):Object(b.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){if(j(null),void 0!==a.fileState&&""!==l.label){var e=l.label.split(":")[1].split(".")[0].concat(".md"),t=l.label.split(":")[1].split(".")[0].concat(".txt");a.fileState.forEach((function(a){a.key.split("/")[1]!==e&&a.key.split("/")[1]!==t||j(a)}))}C(!0)},children:"Create Help"})]}):""]})]})})},De=a(26),Ie=a(60),Ne=function(e,t){return[{type:"action",text:"Node",icon:De.j,action:P,active:e.curGraphInstance,visibility:!0,hotkey:"Ctrl+G"},{type:"vsep"},{type:"action",text:"Create",icon:De.i,action:H,active:!0,visibility:!0},{type:"file-upload",text:"Open",icon:De.f,action:U,active:!0,visibility:!0,hotkey:"Ctrl+O"},{type:"action",text:"Save",icon:De.m,action:B,active:e.curGraphInstance,visibility:!0},{type:"action",text:"Save As",icon:De.m,action:function(e,t){return function(e){M(e).saveToDisk()}(e)},active:e.curGraphInstance,visibility:!0},{type:"action",text:"Empty",icon:De.n,action:z,active:e.curGraphInstance&&!e.resetEnabled,visibility:!0,hotkey:"Ctrl+Backspace"},{type:"action",text:"Restore",icon:De.q,action:V,active:e.curGraphInstance&&e.resetEnabled,visibility:!0,hotkey:"Ctrl+I"},{type:"vsep"},{type:"action",text:"Undo",icon:De.r,action:$,active:e.undoEnabled&&e.curGraphInstance&&!e.resetEnabled,visibility:!0,hotkey:"Ctrl+Z"},{type:"action",text:"Redo",icon:De.k,action:q,active:e.redoEnabled&&e.curGraphInstance&&!e.resetEnabled,visibility:!0,hotkey:"Ctrl+Shift+Z,Ctrl+Y"},{type:"vsep"},{type:"action",text:"Edit",icon:De.e,action:G,active:e.curGraphInstance&&e.eleSelected,visibility:!0,hotkey:"Ctrl+E"},{type:"action",text:"Delete",icon:De.p,action:function(){return function(e,t){var a=(new Date).getTime();e.eleSelectedPayload.ids.forEach((function(t){return M(e).deleteElem(t,a)})),t({type:h.a.ELE_UNSELECTED,payload:null})}(e,t)},active:e.curGraphInstance&&e.eleSelected,visibility:!0,hotkey:"Delete,Backspace,Del,Clear"},{type:"vsep"},{type:"action",text:"History",icon:De.h,action:J,active:e.curGraphInstance,visibility:!0},{type:"vsep"},{type:"action",text:"Server",icon:e.isWorkflowOnServer?De.o:Ie.c,action:function(){return function(e,t){e.isWorkflowOnServer?t({type:h.a.IS_WORKFLOW_ON_SERVER,payload:!1}):t({type:h.a.IS_WORKFLOW_ON_SERVER,payload:!0})}(e,t)},active:e.curGraphInstance,visibility:!0},{type:"action",text:"Options",icon:De.c,action:function(){t({type:h.a.SET_OPTIONS_MODAL,payload:!0})},active:e.isWorkflowOnServer,visibility:e.isWorkflowOnServer&&e.curGraphInstance},{type:"action",text:"Build",icon:De.g,action:function(){return e.curGraphInstance&&e.curGraphInstance.build()},active:-1!==e.curGraphIndex?e.isWorkflowOnServer&&e.graphs[e.curGraphIndex].built:e.isWorkflowOnServer,visibility:e.isWorkflowOnServer&&e.curGraphInstance},{type:"action",text:"Debug",icon:De.b,action:function(){return e.curGraphInstance&&e.curGraphInstance.debug()},active:-1!==e.curGraphIndex?e.isWorkflowOnServer&&e.graphs[e.curGraphIndex].debugged:e.isWorkflowOnServer,visibility:e.isWorkflowOnServer&&e.curGraphInstance},{type:"action",text:"Run",icon:Ie.a,action:function(){return e.curGraphInstance&&e.curGraphInstance.run()},active:-1!==e.curGraphIndex?e.isWorkflowOnServer&&e.graphs[e.curGraphIndex].ran:e.isWorkflowOnServer,visibility:e.isWorkflowOnServer&&e.curGraphInstance},{type:"action",text:"Clear",icon:De.l,action:function(){return e.curGraphInstance&&e.curGraphInstance.clear()},active:-1!==e.curGraphIndex?e.isWorkflowOnServer&&e.graphs[e.curGraphIndex].cleared:e.isWorkflowOnServer,visibility:e.isWorkflowOnServer&&e.curGraphInstance},{type:"action",text:"Stop",icon:Ie.b,action:function(){return e.curGraphInstance&&e.curGraphInstance.stop()},active:-1!==e.curGraphIndex?e.isWorkflowOnServer&&e.graphs[e.curGraphIndex].stopped:e.isWorkflowOnServer,visibility:e.isWorkflowOnServer&&e.curGraphInstance},{type:"action",text:"Destroy",icon:De.a,action:function(){return e.curGraphInstance&&e.curGraphInstance.destroy()},active:-1!==e.curGraphIndex?e.isWorkflowOnServer&&e.graphs[e.curGraphIndex].destroyed:e.isWorkflowOnServer,visibility:e.isWorkflowOnServer&&e.curGraphInstance},{type:"space"},{type:"action",text:"Contribute",icon:Ie.d,action:function(){window.open("https://github.com/ControlCore-Project/concore","_blank")},active:e.curGraphInstance||e.uploadedDirName,visibility:!0},{type:e.curGraphInstance?"menu":"action",text:"Export",icon:De.d,action:function(e,t){return[{fn:function(){return R(e,0,"JPG")},name:"JPG"},{fn:function(){return R(e,0,"PNG")},name:"PNG"}]},visibility:!0,active:e.curGraphInstance},{type:"vsep"}]},Ae=(a(301),a(302),a(177)),ke=a(82);function Te(e){var t=e.Icon,a=e.text,n=e.action,r=e.active,o=e.visibility,i=e.tabIndex,c=e.hotkey;return Object(b.jsx)(ke.a,{menuButton:Object(b.jsx)(ke.b,{children:Object(b.jsx)(Ce,{Icon:t,text:a,action:n,active:r,visibility:o,tabIndex:i,hotkey:c})}),children:n().map((function(e){var t=e.fn,a=e.name;return Object(b.jsx)(ke.c,{onClick:t,children:a},a)}))})}var we=function(e){var t=e.Icon,a=e.text,n=e.active,r=e.visibility,o=e.tabIndex,i=e.hotkey,c=e.superState;return Object(b.jsx)(Ce,{Icon:t,text:a,active:n,visibility:r,tabIndex:o,action:function(){return c.fileRef.current.click()},hotkey:i})},Le=function(e){var t=e.text,a=e.action,n=e.active,r=e.tabIndex;return Object(b.jsxs)("div",{role:"button",tabIndex:r,className:"tool ".concat(n?"active":""),onClick:a,onKeyDown:function(e){return" "===e.key&&a()},children:[Object(b.jsx)(Ae.a,{onChange:a,checked:n,className:"react-switch"}),Object(b.jsx)("div",{children:t})]})},Ce=function(e){var t=e.Icon,a=e.text,n=e.action,r=e.active,o=e.visibility,i=e.tabIndex,c=e.hotkey;return Object(b.jsxs)("div",{role:"button",id:"action_".concat(i),tabIndex:i,className:"tool ".concat(r?"active":""),onClick:function(){return r&&n()},onKeyDown:function(e){return r&&" "===e.key&&n()},"data-tip":c?c.split(",")[0]:"",style:{display:"".concat(o?"":"none")},children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsx)(t,{size:"20"})}),Object(b.jsx)("div",{style:{fontSize:14},children:a})]})},Me=function(){return Object(b.jsx)("div",{className:"Vsep sep"})},Pe=function(){return Object(b.jsx)("div",{className:"hsep sep"})},Ge=function(){return Object(b.jsx)("div",{className:"space"})},Re=(a(303),function(e){var t=e.superState,a=e.dispatcher,n=Ne(t,a);return r.a.useEffect((function(){!function(e){var t="",a={};e.forEach((function(e,n){e.hotkey&&e.hotkey.split(",").forEach((function(e){[e,e.replace("Ctrl","Command")].forEach((function(e){t+="".concat(e,","),a[e]=document.getElementById("action_".concat(n+1))}))}))})),t=t.substring(0,t.length-1),Object(m.a)(t,(function(e,t){e.preventDefault(),a[t.shortcut].click()}))}(n)}),[]),Object(b.jsxs)("header",{className:"header",children:[Object(b.jsx)("section",{className:"middle titlebar",children:t.curGraphInstance?"".concat(t.curGraphInstance.projectName," - concore Editor"):"untitled"}),Object(b.jsx)("section",{className:"toolbar",children:n.map((function(e,n){var r=e.text,o=e.active,i=e.visibility,c=e.action,s=e.icon,l=e.type,d={text:r,active:o,visibility:i,tabIndex:n+1,key:r,action:function(e){return c(t,a,e)},Icon:s,hotkey:e.hotkey};switch(l){case"vsep":return Object(b.jsx)(Me,{},"".concat("v".concat(n)));case"space":return Object(b.jsx)(Ge,{},"".concat("s".concat(n)));case"switch":return Object(b.jsx)(Le,Object(Y.a)({},d));case"menu":return Object(b.jsx)(Te,Object(Y.a)({},d));case"file-upload":return Object(b.jsx)(we,Object(Y.a)(Object(Y.a)({},d),{},{superState:t}));case"action":return Object(b.jsx)(Ce,Object(Y.a)({},d));default:return Object(b.jsx)(b.Fragment,{})}}))}),Object(b.jsx)(Pe,{})]})}),Be=(a(304),function(e){var t=e.superState,a=e.dispatcher,r=t.graphs[t.curGraphIndex],o=Object(n.useState)("Untitled"),i=Object(c.a)(o,2),s=i[0],l=i[1],d=Object(n.useState)("Default"),u=Object(c.a)(d,2),p=u[0],_=u[1],f=Object(n.useCallback)((function(e){return e&&e.focus()}),[]),y=t.newGraphModal,O=t.editDetailsModal||r&&!r.projectName;Object(n.useEffect)((function(){t.editDetailsModal&&r?(l(r.projectName),_(r.authorName)):l("")}),[null===r||void 0===r?void 0:r.authorName,t.editDetailsModal,r]),Object(n.useEffect)((function(){if(null===r||void 0===r?void 0:r.authorName)_(r.authorName);else{var e=g.a.getAuthorName();_(e)}}),[]);var j=function(){t.fileRef.current.click()},m=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"divider"}),Object(b.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:j,children:"Open Existing From GraphML File"})]})};return Object(b.jsx)(xe,{ModelOpen:y||O,closeModal:t.editDetailsModal||t.newGraphModal?function(){t.newGraphModal?a({type:h.a.SET_NEW_GRAPH_MODAL,payload:!1}):t.editDetailsModal&&a({type:h.a.SET_EDIT_DETAILS_MODAL,payload:!1})}:null,title:"Project Details",children:Object(b.jsxs)("form",{className:"proj-details",onSubmit:function(e){e.preventDefault(),y?a({type:h.a.ADD_GRAPH,payload:{projectName:s,authorName:p}}):O&&(t.curGraphInstance.setProjectName(s),t.curGraphInstance.setProjectAuthor(p),a({type:h.a.SET_EDIT_DETAILS_MODAL,payload:!1})),g.a.saveAllgs(),g.a.setAuthorName(p)},children:[Object(b.jsx)("span",{children:"Workflow Name"}),Object(b.jsx)("input",{ref:f,placeholder:"Title of workflow",required:!0,value:s,onChange:function(e){return l(e.target.value)}}),Object(b.jsx)("span",{children:"Author"}),Object(b.jsx)("input",{placeholder:"Author of workflow",value:p,onChange:function(e){return _(e.target.value)},required:!0}),Object(b.jsx)("div",{className:"expand",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"})}),Object(b.jsx)("div",{className:"expand",children:y&&Object(b.jsx)(m,{})})]})})}),We=(a(305),function(e){var t=e.superState,a=e.dispatcher,r=Object(n.useState)(""),o=Object(c.a)(r,2),i=o[0],s=o[1],l=Object(n.useState)("Copy"),d=Object(c.a)(l,2),u=d[0],p=d[1],_=t.shareModal&&t.curGraphInstance;Object(n.useEffect)((function(){_&&(s(t.curGraphInstance.serializeGraph()),p("Copy"))}),[_]);var f="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"?g=").concat(i);return Object(b.jsx)(xe,{ModelOpen:t.shareModal,title:"Shareable Link",closeModal:function(){a({type:h.a.SET_SHARE_MODAL,payload:!1})},children:Object(b.jsxs)("div",{className:"share-modal",children:[Object(b.jsx)("input",{readOnly:!0,className:"preDiv",value:f}),Object(b.jsx)("button",{onClick:function(){navigator.clipboard.writeText(f).then((function(){p("Copied!"),document.getElementsByClassName("preDiv")[0].focus(),document.getElementsByClassName("preDiv")[0].select()}))},type:"button",className:"copyBtn",children:u})]})})}),Ue=(a(148),a(306),function(e){var t,a=e.pre,n=e.post,o=e.value,i=e.onChange,c=e.height,s=e.docString,l=r.a.createRef();return Object(b.jsxs)("div",{className:"textField",onClick:function(){return l.current.focus()},onKeyDown:function(){return l.current.focus()},role:"textbox",tabIndex:0,children:[s?Object(b.jsx)("div",{className:"docStr",children:(t=s,t.split("**").map((function(e,t){return t%2?Object(b.jsx)("span",{children:Object(b.jsx)("b",{children:e})},e):Object(b.jsx)("span",{children:e},e)})))}):Object(b.jsx)("div",{}),Object(b.jsx)("br",{}),a?Object(b.jsx)("textarea",{className:"preTextField",value:a,readOnly:!0,spellCheck:"false"}):Object(b.jsx)("div",{}),Object(b.jsx)("textarea",{className:"mainTextField",spellCheck:"false",value:o,onChange:i,"data-gramm_editor":"false",style:{height:c,width:"90vw"},ref:l}),n?Object(b.jsx)("textarea",{className:"postTextField",readOnly:!0,value:n,spellCheck:"false"}):Object(b.jsx)("div",{})]})}),Fe=function(e){var t=e.superState,a=e.dispatcher,r=Object(n.useState)(""),o=Object(c.a)(r,2),i=o[0],s=o[1],l=Object(n.useState)(""),d=Object(c.a)(l,2),u=d[0],p=d[1],_=Object(n.useState)(""),f=Object(c.a)(_,2),y=f[0],O=f[1];Object(n.useEffect)((function(){t.curGraphInstance&&(s(t.curGraphInstance.getNodeValidator()),p(t.curGraphInstance.getEdgeValidator()))}),[t.curGraphInstance]);return Object(b.jsx)(xe,{ModelOpen:t.settingsModal,closeModal:function(){return a({type:h.a.SET_SETTING_MODAL,payload:!1})},title:"Settings",children:Object(b.jsxs)("div",{className:"setting-container",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Node Validator"}),Object(b.jsx)(Ue,{pre:"function validateNode(node, nodes, edges, type) {",post:"}",value:i,onChange:function(e){return s(e.target.value)},height:200,docString:"Takes **`node`** details under validation, existing **`nodes`**, existing **`edges`** and **`type`**\n\n**Node:** { label: String, style: Object, id: String | undefined },\n**Nodes:** [{ label: String, style: Object, id: String }],\n**Edges:** [{ label: String, sourceLabel: String, targetLabel: String, style: Object, id: String }],\n**Type:** `New` | `Update`"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Edge  Validator"}),Object(b.jsx)(Ue,{pre:"function validateEdge(edge, nodes, edges, type) {",post:"}",value:u,onChange:function(e){return p(e.target.value)},height:200,docString:"Takes **`edge`** details under validation, existing **`nodes`** and existing **`edges`** and **`type`**\n\n**Edge:** { label: String, sourceLabel: String, targetLabel: String, style: Object, id: String | undefined },\n**Nodes:** [{ label: String, style: Object, id: String }],\n**Edges:** [{ label: String, sourceLabel: String, targetLabel: String, style: Object, id: String }],\n**Type:** `New` | `Update`"})]}),Object(b.jsx)("div",{className:"error",children:y}),Object(b.jsx)("div",{className:"footer",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(){try{t.curGraphInstance.setEdgeNodeValidator({nodeValidator:"(node, nodes, edges, type)=>{".concat(i,"}"),edgeValidator:"(edge, nodes, edges, type)=>{".concat(u,"}")}),a({type:h.a.SET_SETTING_MODAL,payload:!1}),O("")}catch(e){O(e.message)}},children:"Save"})})]})})},He=(a(307),function(e){var t=e.superState,a=e.dispatcher,o=r.a.useRef();return Object(n.useEffect)((function(){a({type:h.a.SET_FILE_REF,payload:o});var e=document.getElementsByTagName("body")[0],n=document.getElementsByClassName("drag-drop-area")[0],r=0;e.addEventListener("dragenter",(function(e){e.preventDefault(),1===(r+=1)&&n.classList.remove("hidden")})),e.addEventListener("dragleave",(function(e){e.preventDefault(),0===(r-=1)&&n.classList.add("hidden")})),e.addEventListener("dragover",(function(e){e.preventDefault()})),["dragend","dragexit","drop"].forEach((function(t){e.addEventListener(t,(function(e){e.preventDefault(),r=0,n.classList.add("hidden")}))})),e.addEventListener("drop",(function(e){e.preventDefault(),o.current.value=null,1===e.dataTransfer.files.length&&"graphml"===e.dataTransfer.files[0].name.split(".").slice(-1)[0]&&U(t,a,e.dataTransfer.files[0])}))}),[]),Object(b.jsx)("div",{className:"drag-drop-area hidden",children:Object(b.jsxs)("div",{className:"inner",children:[Object(b.jsx)(De.f,{size:100,style:{color:"#1e88e5"}}),Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"file",ref:o,onClick:function(e){e.target.value=null},style:{display:"none"},accept:".graphml",onChange:function(e){return U(t,a,e)}}),Object(b.jsx)("span",{className:"arrow",children:"\u27f6"}),Object(b.jsx)("h1",{className:"text",children:"Drop the File anywhere to open"})]})]})})}),Ke=(a(308),function(e){var t,a=e.superState,r=e.dispatcher,o=Object(n.useState)(0),i=Object(c.a)(o,2),s=i[0],l=i[1],d=Object(n.useState)([]),u=Object(c.a)(d,2),p=u[0],_=u[1],f=Object(n.useState)([]),y=Object(c.a)(f,2),O=y[0],g=y[1],j=[_e.a.ADD_NODE,_e.a.ADD_EDGE,_e.a.UPDATE_NODE,_e.a.UPDATE_EDGE,_e.a.DEL_NODE,_e.a.DEL_EDGE,_e.a.SET_DIM,_e.a.SET_BENDW,_e.a.SET_POS],m=Object(n.useState)(function(){var e={};return j.forEach((function(t){e[t]=!0})),e}()),E=Object(c.a)(m,2),v=E[0],x=E[1],S=function(e){return a.curGraphInstance?a.curGraphInstance.getLabelFromID(e):""};Object(n.useEffect)((function(){a.curGraphInstance&&(_(Object(de.a)(a.curGraphInstance.actionArr.slice().reverse().map((function(e,t){return Object(Y.a)(Object(Y.a)({},e),{},{i:t})})))),l(a.curGraphInstance.actionArr.length-a.curGraphInstance.curActionIndex))}),[a.viewHistory,a.graphs,a.curGraphInstance,s]);var D=(t={},Object(ue.a)(t,_e.a.ADD_NODE,"NodeAddition:"),Object(ue.a)(t,_e.a.ADD_EDGE,"EdgeAddition"),Object(ue.a)(t,_e.a.UPDATE_NODE,"NodeUpdates"),Object(ue.a)(t,_e.a.UPDATE_EDGE,"EdgeUpdates"),Object(ue.a)(t,_e.a.DEL_NODE,"NodeDeletion"),Object(ue.a)(t,_e.a.DEL_EDGE,"EdgeDeletion"),Object(ue.a)(t,_e.a.SET_POS,"NodePosChange"),Object(ue.a)(t,_e.a.SET_DIM,"NodeDimensionChange"),Object(ue.a)(t,_e.a.SET_BENDW,"EdgeBend"),t),I=function(e,t,n,r,o){var i=new Date(parseInt(e,10)),c=i.toLocaleDateString(),d=i.toLocaleTimeString();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("td",{children:r===s?"[Current]":Object(b.jsx)("button",{className:"a-link",type:"button",onClick:function(){return function(e){if(window.confirm("Are you sure to restore the selected state?")){for(var t=s;e>t;)a.curGraphInstance.undoSingleAction(),t+=1;for(;e<t;)a.curGraphInstance.redoSingleAction(),t-=1;l(t)}}(r)},children:"[Restore]"})}),Object(b.jsx)("td",{children:"".concat(c,"-").concat(d)}),Object(b.jsxs)("td",{children:["[",Object(b.jsx)("b",{children:"".concat(n)}),"]"]}),Object(b.jsx)("td",{style:{fontWeight:100},children:t}),Object(b.jsx)("td",{style:{fontWeight:100},children:o})]})},N=function(e){var t=e.equivalent,a=e.tid,n=e.i,r=e.authorName,o=e.hash;return I(a,function(e){var t=e.parameters;switch(e.actionName){case _e.a.ADD_NODE:return"Created new Node: ".concat(t[0]);case _e.a.ADD_EDGE:return"Created new Edge ".concat(S(t[0].id)," between ").concat(S(t[0].sourceID)," and ").concat(S(t[0].targetID));case _e.a.UPDATE_NODE:return"Updated Label/Style for ".concat(S(t[0])," node");case _e.a.UPDATE_EDGE:return"Updated Edge ".concat(S(t[0]));case _e.a.DEL_NODE:return"Deleted Node: ".concat(S(t[0]));case _e.a.DEL_EDGE:return"Deleted Edge: ".concat(S(t[0]));case _e.a.SET_POS:return"Moved node ".concat(S(t[0])," on canvas");case _e.a.SET_DIM:return"Changed dimension of node ".concat(S(t[0]));case _e.a.SET_BENDW:return"Modified Bend Point of node ".concat(S(t[0]));default:return""}}(t),r,n,o)};Object(n.useEffect)((function(){g(p.filter((function(e){return v[e.equivalent.actionName]})).map(N))}),[v,p]);return Object(b.jsx)(xe,{ModelOpen:a.viewHistory,closeModal:function(){return r({type:h.a.SET_HISTORY_MODAL,payload:!1})},title:"History",children:Object(b.jsxs)("div",{className:"hist-container",children:[Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("legend",{children:"Filters"}),j.map((function(e){return Object(b.jsxs)("label",{htmlFor:e,className:"filter_checkbox",children:[Object(b.jsx)("input",{type:"checkbox",name:"filter",checked:v[e],onChange:function(){return x(Object(Y.a)(Object(Y.a)({},v),{},Object(ue.a)({},e,!v[e])))}}),D[e]]},e)}))]}),Object(b.jsx)("div",{className:"hist-list",children:Object(b.jsx)("table",{style:{listStyleType:"circle"},children:Object(b.jsx)("tbody",{children:O.map((function(e,t){return Object(b.jsx)("tr",{className:"hist-element ".concat(t===s?"active":""),children:e},t)}))})})})]})})}),ze=a(121),Ve=a(81),$e=a.n(Ve),qe=(a(365),function(e){var t=e.superState,a=e.dispatcher,o=r.a.useRef(),i=Object(n.useState)(!1),s=Object(c.a)(i,2),l=s[0],d=s[1],u=Object(n.useState)([]),p=Object(c.a)(u,2),_=p[0],f=p[1];Object(n.useEffect)((function(){-1===navigator.userAgent.indexOf("Edg")&&-1===navigator.userAgent.indexOf("Chrome")||d(!0),a({type:h.a.SET_FILE_REF,payload:o})}),[]),Object(n.useEffect)((function(){window.localStorage.setItem("fileList",JSON.stringify(_))}),[_]),Object(n.useEffect)((function(){f(t.fileState)}),[t.fileState]);var y=function(){var e=Object(x.a)(v.a.mark((function e(t,a){var n,r,o,i,s,l,d,u,p,h,b,_,f,O;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t,r=[],o=!0,i=!1,e.prev=4,l=Object(ze.a)(a.entries());case 6:return e.next=8,l.next();case 8:return d=e.sent,o=d.done,e.next=12,d.value;case 12:if(u=e.sent,o){e.next=31;break}if(p=u,h=Object(c.a)(p,2),b=h[0],"file"!==(_=h[1]).kind){e.next=22;break}return e.next=18,_.getFile();case 18:f=e.sent,r=r.concat([{key:"".concat(t,"/").concat(a.name,"/").concat(b),modified:f.lastModified,size:f.size,fileObj:f,fileHandle:_}]),e.next=28;break;case 22:if("directory"!==_.kind){e.next=28;break}return n="".concat(t,"/").concat(a.name),e.next=26,y(n,_);case 26:O=e.sent,r=r.concat(O);case 28:o=!0,e.next=6;break;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(4),i=!0,s=e.t0;case 37:if(e.prev=37,e.prev=38,o||null==l.return){e.next=42;break}return e.next=42,l.return();case 42:if(e.prev=42,!i){e.next=45;break}throw s;case 45:return e.finish(42);case 46:return e.finish(37);case 47:return e.abrupt("return",r);case 48:case"end":return e.stop()}}),e,null,[[4,33,37,47],[38,,42,46]])})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(x.a)(v.a.mark((function e(){var t,n,r,o,i,s,l,d,u,p,b,_,O,g;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showDirectoryPicker();case 2:t=e.sent,n=[],r=!0,o=!1,e.prev=6,s=Object(ze.a)(t.entries());case 8:return e.next=10,s.next();case 10:return l=e.sent,r=l.done,e.next=14,l.value;case 14:if(d=e.sent,r){e.next=32;break}if(u=d,p=Object(c.a)(u,2),b=p[0],"file"!==(_=p[1]).kind){e.next=24;break}return e.next=20,_.getFile();case 20:O=e.sent,n=n.concat([{key:"".concat(t.name,"/").concat(b),modified:O.lastModified,size:O.size,fileObj:O,fileHandle:_}]),e.next=29;break;case 24:if("directory"!==_.kind){e.next=29;break}return e.next=27,y(t.name,_);case 27:g=e.sent,n=n.concat(g);case 29:r=!0,e.next=8;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(6),o=!0,i=e.t0;case 38:if(e.prev=38,e.prev=39,r||null==s.return){e.next=43;break}return e.next=43,s.return();case 43:if(e.prev=43,!o){e.next=46;break}throw i;case 46:return e.finish(43);case 47:return e.finish(38);case 48:f([]),f(n),a({type:h.a.SET_DIR_NAME,payload:n[0].key.split("/")[0]}),a({type:h.a.SET_FILE_STATE,payload:n});case 52:case"end":return e.stop()}}),e,null,[[6,34,38,48],[39,,43,47]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(v.a.mark((function e(){var n,r,o,i,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={types:[{description:"Graphml",accept:{"text/graphml":[".graphml"]}}],excludeAcceptAllOption:!0,multiple:!1},e.next=3,window.showOpenFilePicker(n);case 3:return r=e.sent,o=Object(c.a)(r,1),i=o[0],e.next=8,i.getFile();case 8:s=e.sent,U(t,a,s,i);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[!l&&Object(b.jsxs)("label",{className:"inputButton",htmlFor:"fileButton",children:["Upload Directory",Object(b.jsx)("input",{type:"file",accept:".py, .m, .c, .cpp, .v, .sh",id:"fileButton",style:{display:"none"},onClick:function(e){e.target.value=null},onChange:function(e){f([]),f((function(t){for(var a=0;a<e.target.files.length;a+=1)t=t.concat([{key:e.target.files[a].webkitRelativePath,modified:e.target.files[a].lastModified,size:e.target.files[a].size,fileObj:e.target.files[a]}]);return t})),window.localStorage.setItem("fileList",JSON.stringify(_))},directory:!0,webkitdirectory:"true"})]}),l&&Object(b.jsx)("button",{type:"button",className:"inputButton",disabled:!l,onClick:O,children:"Upload Directory"}),!l&&Object(b.jsx)("input",{type:"file",ref:o,onClick:function(e){e.target.value=null},style:{display:"none"},accept:".graphml",onChange:function(e){return U(t,a,e.target.files[0])}}),l&&Object(b.jsx)("button",{type:"button",ref:o,className:"inputButton",disabled:!l,style:{display:"none"},onClick:g,label:"File Upload"}),Object(b.jsxs)("h4",{children:["Folder Name :"," ",_[0]?_[0].key.split("/")[0]:""]}),Object(b.jsx)($e.a,{files:_,onSelectFile:function(e){if(["jpeg","jpg","png","exe"].includes(e.fileObj.name.split(".").pop()))alert("Wrong file extension");else if("graphml"===e.fileObj.name.split(".").pop()){var n=-1;t.graphs.forEach((function(t,a){t.fileName===e.fileObj.name&&(n=a)})),-1!==n?a({type:h.a.CHANGE_TAB,payload:n}):U(t,a,e.fileObj,e.fileHandle)}else F(0,a,e.fileObj,e.fileHandle)},detailRenderer:function(){return null},fileRenderer:Ve.FileRenderers.TableFile,folderRenderer:Ve.FolderRenderers.TableFolder})]})}),Je=a(171),Ze=a.n(Je),Xe=a(28),Ye=(a(366),a(367),a(368),a(369),a(370),a(371),a(372),a(373),a(374),a(375),function(e){var t=e.superState,a=e.dispatcher,r=Object(n.useState)(""),o=Object(c.a)(r,2),i=o[0],s=o[1],l=Object(n.useState)(""),d=Object(c.a)(l,2),u=d[0],p=d[1],_=Object(n.useState)(!1),f=Object(c.a)(_,2),y=f[0],O=f[1];Object(n.useEffect)((function(){-1===navigator.userAgent.indexOf("Edg")&&-1===navigator.userAgent.indexOf("Chrome")||O(!0)}),[]);function g(){return j.apply(this,arguments)}function j(){return(j=Object(x.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.fileHandle){e.next=10;break}return e.next=3,t.fileHandle.createWritable();case 3:return n=e.sent,e.next=6,n.write(i);case 6:return e.next=8,n.close();case 8:e.next=11;break;case 10:alert("Switch to Edge/Chrome!");case 11:a({type:h.a.EDIT_TEXTFILE,payload:{show:!1}});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=Object(x.a)(v.a.mark((function e(){var n,r,o,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showSaveFilePicker();case 2:return n=e.sent,e.next=5,n.createWritable();case 5:return r=e.sent,e.next=8,r.write(i);case 8:return e.next=10,r.close();case 10:return e.next=12,n.getFile();case 12:o=e.sent,c=(c=t.fileState).concat([{key:"".concat(t.uploadedDirName,"/").concat(n.name),modified:o.lastModified,size:o.size,fileObj:o,fileHandle:n}]),a({type:h.a.SET_FILE_STATE,payload:c});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return D.apply(this,arguments)}function D(){return(D=Object(x.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=prompt("Filename:"),a=(new TextEncoder).encode(i),n=new Blob([a],{type:"application/json;charset=utf-8"}),Object(re.saveAs)(n,t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)(Object(x.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.fileObj){e.next=13;break}if(p(t.fileObj.name),(a=new FileReader).onload=function(e){s(e.target.result)},!t.fileHandle){e.next=12;break}return e.t0=a,e.next=8,t.fileHandle.getFile();case 8:e.t1=e.sent,e.t0.readAsText.call(e.t0,e.t1),e.next=13;break;case 12:a.readAsText(t.fileObj);case 13:case"end":return e.stop()}}),e)}))),[t.fileObj]),Object(b.jsx)(xe,{ModelOpen:t.textFileModal,closeModal:function(){a({type:h.a.EDIT_TEXTFILE,payload:{show:!1}}),s(""),p("")},title:u,children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"save-bar",children:[u&&Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:g,children:"Save"}),y&&Object(b.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:m,children:["Save",u?" As":""]}),!y&&Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:S,children:"Save As"})]}),Object(b.jsx)("div",{className:"setting-container",children:Object(b.jsx)(Ze.a,{value:i,onValueChange:function(e){return s(e)},highlight:function(e){return function(e){var t=u.split(".").pop();if(["v","c","h","hpp","cpp","py","m","sh"].includes(t))switch(t){case"v":return Object(Xe.highlight)(e,Xe.languages.verilog,"verilog");case"c":case"h":case"hpp":return Object(Xe.highlight)(e,Xe.languages.c,"c");case"cpp":return Object(Xe.highlight)(e,Xe.languages.cpp,"cpp");case"py":return Object(Xe.highlight)(e,Xe.languages.python,"python");case"m":return Object(Xe.highlight)(e,Xe.languages.matlab,"matlab");case"sh":return Object(Xe.highlight)(e,Xe.languages.bash,"bash");default:return Object(Xe.highlight)(e,Xe.languages.plaintext)}return Object(Xe.highlight)(e,Xe.languages.plaintext)}(e)},padding:10,style:{fontFamily:'"Arial", "Helvetica", sans-serif',fontSize:16,minHeight:"100vh",minWidth:"90vw",border:"1px solid black"}})}),Object(b.jsxs)("div",{className:"save-bar",children:[u&&Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:g,children:"Save"}),y&&Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:m,children:"Save As"}),!y&&Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:S,children:"Save As"})]})]})})}),Qe=a(402),et=function(e){var t=e.superState,a=e.dispatcher;return Object(b.jsx)(xe,{closeModal:function(){a({type:h.a.SET_MARKDOWN_MODAL,payload:!1}),a({type:h.a.SET_INPUT_FILE,payload:{inputFile:"",fname:""}})},ModelOpen:t.markDownModal,title:t.inputFileName,children:Object(b.jsx)(Qe.a,{children:t.inputFile})})},tt=(a(378),function(e){var t=e.superState,a=e.dispatcher,r=Object(n.useState)(!1),o=Object(c.a)(r,2),i=o[0],s=o[1],l=Object(n.useState)(!1),d=Object(c.a)(l,2),u=d[0],p=d[1],_=Object(n.useState)(!1),f=Object(c.a)(_,2),y=f[0],O=f[1],g=Object(n.useState)(""),j=Object(c.a)(g,2),m=j[0],E=j[1],v=Object(n.useState)(""),x=Object(c.a)(v,2),S=x[0],D=x[1];return Object(b.jsx)(xe,{closeModal:function(){a({type:h.a.SET_OPTIONS_MODAL,payload:!1}),a({type:h.a.SET_OPTIONS,payload:{unlock:i,docker:u,maxT:S,param:m,octave:y}})},ModelOpen:t.optionsModal,title:"Options",children:Object(b.jsxs)("div",{className:"main-div",children:[Object(b.jsxs)("label",{htmlFor:"Docker",children:["Docker",Object(b.jsx)("input",{type:"checkbox",checked:u,onChange:function(){p(!u)}})]}),Object(b.jsxs)("label",{htmlFor:"Octave",className:"main-div-comp",children:["Octave",Object(b.jsx)("input",{type:"checkbox",checked:y,onChange:function(){O(!y)}})]}),Object(b.jsxs)("label",{htmlFor:"Unlock",className:"main-div-comp",children:["Unlock",Object(b.jsx)("input",{type:"checkbox",checked:i,onChange:function(){s(!i)}})]}),Object(b.jsxs)("label",{htmlFor:"Maxtime",className:"main-div-comp",children:["Max Time\xa0",Object(b.jsx)("input",{type:"text",value:S,placeholder:"Enter Maximum Time",onChange:function(e){!function(e){D(e.target.value)}(e)}})]}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("span",{children:"Params:"}),Object(b.jsx)("br",{}),Object(b.jsx)("textarea",{cols:"80",rows:"10",value:m,placeholder:"//Write Script",onChange:function(e){!function(e){E(e.target.value)}(e)}})]})})}),at=a(44),nt=a.n(at),rt=(a(379),function(e){var t=e.superState;return Object(b.jsxs)(xe,{ModelOpen:t.loader,title:"Wait.... The function is being executed",children:[Object(b.jsxs)("div",{className:"loader-main",children:[Object(b.jsx)(nt.a,{color:"#36d7b7",className:"loader-items"}),Object(b.jsx)(nt.a,{color:"#36d7b7",className:"loader-items"}),Object(b.jsx)(nt.a,{color:"#36d7b7",className:"loader-items"}),Object(b.jsx)(nt.a,{color:"#36d7b7",className:"loader-items"}),Object(b.jsx)(nt.a,{color:"#36d7b7",className:"loader-items"}),Object(b.jsx)(nt.a,{color:"#36d7b7",className:"loader-items"}),Object(b.jsx)(nt.a,{color:"#36d7b7",className:"loader-items"})]}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),t.curGraphInstance&&t.dockerCheck&&t.graphs[t.curGraphIndex].built?Object(b.jsx)("button",{className:"btn loader-btn",onClick:function(){t.curGraphInstance.stop()},type:"button",children:"STOP Docker Build"}):""]})}),ot=function(){var e=Object(n.useReducer)(h.c,h.b),t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){return window.onbeforeunload=function(e){return e.returnValue="Are you sure you want to leave this page?","Are you sure you want to leave this page?"},function(){window.onbeforeunload=null}}),[]),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(Be,{superState:a,dispatcher:r}),Object(b.jsx)(We,{superState:a,dispatcher:r}),Object(b.jsx)(Fe,{superState:a,dispatcher:r}),Object(b.jsx)(Ke,{superState:a,dispatcher:r}),Object(b.jsx)(Ye,{superState:a,dispatcher:r}),Object(b.jsx)(tt,{superState:a,dispatcher:r}),Object(b.jsx)(rt,{superState:a}),Object(b.jsx)(Se,{closeModal:function(){return r({type:h.a.Model_Close})},superState:a,dispatcher:r}),Object(b.jsx)(et,{superState:a,dispatcher:r}),Object(b.jsx)(He,{dispatcher:r}),Object(b.jsx)(Re,{superState:a,dispatcher:r}),Object(b.jsxs)("section",{className:"body",style:{display:"flex",overflow:"hidden"},children:[Object(b.jsx)("div",{style:{display:"flex",overflow:"auto"},children:Object(b.jsx)(qe,{superState:a,dispatcher:r})}),Object(b.jsx)("div",{className:"graph",style:{display:"flex",overflow:"hidden"},children:Object(b.jsx)(me,{dispatcher:r,superState:a})})]}),Object(b.jsx)(l.a,{place:"bottom",type:"dark",effect:"solid"}),Object(b.jsx)(s.a,{position:"top-right",autoClose:5e3,pauseOnHover:!1})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var it=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,404)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),o(e),i(e)}))};i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(ot,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),it()},47:function(e,t,a){"use strict";var n={dist:function(e,t){return Math.pow(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),.5)},rotate:function(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t)}},extraRad:function(e,t){return e.x>=t.x&&e.y>t.y||e.x>=t.x&&e.y<t.y?Math.PI:0},getRadian:function(e,t,a){return(Math.atan(e)-this.extraRad(t,a)+2*Math.PI)%(2*Math.PI)},getCoordinate:function(e,t,a,n){var r=(a.y-n.y)/(a.x-n.x),o=this.getRadian(r,a,n),i={x:this.dist(a,n)*e,y:t},c=this.rotate(i,o),s=c.x,l=c.y;return{x:s+a.x,y:l+a.y}},getWeightDistance:function(e,t,a){var n={x:e.x-t.x,y:e.y-t.y},r=(t.y-a.y)/(t.x-a.x),o=this.getRadian(r,t,a),i=this.rotate(n,-o),c=i.x;return{d:i.y,w:c/this.dist(t,a)}}};t.a=n},59:function(e,t,a){"use strict";var n=a(13),r=[{selector:"*",style:{overlayOpacity:"0"}},{selector:'node[type = "ordin"]',style:{content:"data(label)",zIndex:100,width:"data(style.width)",height:"data(style.height)",shape:"data(style.shape)",opacity:"data(style.opacity)",backgroundColor:"data(style.backgroundColor)",borderColor:"data(style.borderColor)",borderWidth:"data(style.borderWidth)",textValign:"center",textHalign:"center"}},{selector:'node[type="special"]',style:{width:8,height:8,backgroundColor:"data(style.backgroundColor)",zIndex:1e3}},{selector:"edge",style:{curveStyle:"bezier",targetArrowShape:"triangle"}},{selector:'edge[type = "ordin"]',style:{width:"data(style.thickness)",lineColor:"data(style.backgroundColor)",targetArrowColor:"data(style.backgroundColor)",curveStyle:"segments",segmentDistances:"data(bendData.bendDistance)",segmentWeights:"data(bendData.bendWeight)",edgeDistances:"node-position",lineStyle:"data(style.shape)"}},{selector:"edge[label]",style:{label:"data(label)",edgeTextRotation:"autorotate",zIndex:999,textBackgroundOpacity:1,color:"#000",textBackgroundColor:"#fff",textBackgroundShape:"roundrectangle",textBorderColor:"#fff",textBorderWidth:2,textBorderOpacity:1}},{selector:".hidden",style:{display:"none"}},{selector:'.eh-handle,node[type="bend"]',style:{height:25,width:25,opacity:.4,borderWidth:5,borderOpacity:.1}},{selector:'node[type="bend"]',style:{backgroundColor:"#9575cd"}},{selector:".eh-handle",style:{backgroundColor:"#f50057"}},{selector:":selected",style:{overlayColor:"#000",overlayOpacity:.1,overlayPadding:5}}],o={style:Object(n.a)(r),zoomingEnabled:!0,userZoomingEnabled:!0,minZoom:.25,maxZoom:5};t.a=o},6:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return O})),a.d(t,"b",(function(){return f}));var n=a(199)({$$typeof:"",Model_Open_Create_Node:"OpenModal_CreateNode",Model_Open_Create_Edge:"OpenModal_CreateEdge",Model_Open_Update_Edge:"OpenModal_UpdateEdge",Model_Open_Update_Node:"OpenModal_UpdateNode",Model_Close:"CloseModal",ELE_UNSELECTED:"ELE_UNSELECTED",ELE_SELECTED:"ELE_SELECTED",TURN_DRAW:"TURN_DRAW",SET_ZOOM:"SET_ZOOM",SET_PROJECT_DETAILS:"SET_PROJECT_DETAILS",SET_UNDO:"SET_UNDO",SET_REDO:"SET_REDO",ADD_GRAPH_INSTANCE:"ADD_GRAPH_INSTANCE",ADD_GRAPH:"ADD_GRAPH",ADD_GRAPH_BULK:"ADD_GRAPH_BULK",CHANGE_TAB:"CHANGE_TAB",CHANGE_RESET:"CHANGE_RESET",REMOVE_GRAPH:"REMOVE_GRAPH",NEW_GRAPH:"NEW_GRAPH",SET_SHARE_MODAL:"SET_SHARE_MODAL",SET_SETTING_MODAL:"SET_SETTING_MODAL",SET_MARKDOWN_MODAL:"SET_MARKDOWN_MODAL",SET_FILE_REF:"SET_FILE_REF",SET_HISTORY_MODAL:"SET_HISTORY_MODAL",SET_AUTHOR:"SET_AUTHOR",IS_WORKFLOW_ON_SERVER:"IS_WORKFLOW_ON_SERVER",SET_CUR_INSTANCE:"SET_CUR_INSTANCE",SET_CUR_INDEX:"SET_CUR_INDEX",SET_ZOOM_LEVEL:"SET_ZOOM_LEVEL",SET_EDIT_DETAILS_MODAL:"SET_EDIT_DETAILS_MODAL",SET_NEW_GRAPH_MODAL:"SET_NEW_GRAPH_MODAL",SET_OPTIONS_MODAL:"SET_OPTIONS_MODAL",EDIT_TEXTFILE:"EDIT_TEXTFILE",SET_FILE_HANDLE:"SET_FILE_HANDLE",SET_DIR_NAME:"SET_DIR_NAME",SET_FILE_STATE:"SET_FILE_STATE",SET_INPUT_FILE:"SET_INPUT_FILE",SET_OPTIONS:"SET_OPTIONS",SET_LOADER:"SET_LOADER",SET_FUNCTIONS:"SET_FUNCTIONS"}),r=a(10),o=a(13),i=a(3),c=a(8),s=a(1),l=(a(204),a(38)),d=a(2),u=function(e){var t=e.data,a=e.setData,n=e.submit,r=e.labelAllowed,o=e.state,u=Object(s.useCallback)((function(e){return e&&e.focus()}),[]),p=Object(s.createRef)(),h=Object(s.useState)(!1),b=Object(c.a)(h,1)[0],_=Object(s.useState)([]),f=Object(c.a)(_,2),y=f[0],O=f[1],g=Object(s.useState)(new Map("")),j=Object(c.a)(g,2),m=j[0],E=j[1],v=Object(s.useState)(""),x=Object(c.a)(v,2),S=x[0],D=x[1],I=Object(s.useState)(""),N=Object(c.a)(I,2),A=N[0],k=N[1],T=[];T.push(0);return Object(s.useEffect)((function(){var e=y;o.fileState.forEach((function(t){if(t.key.toString().includes(".md")){e.push(t),O(e);var a=new Map;a=m;var n=new FileReader;n.onload=function(e){a.set(t,"   DESC: ".concat(e.target.result.slice(0,50).replace("#",""))),E(a)},n.readAsText(t.fileObj)}}))}),[o.fileState]),Object(s.useEffect)((function(){var e;b||(e={width:Math.max(t.style.width,Math.min(500,p.current.offsetWidth+20))},a(Object(i.a)(Object(i.a)({},t),{},{style:Object(i.a)(Object(i.a)({},t.style),e)})))}),[!b&&t.label]),Object(s.useEffect)((function(){D(t.label.split(":")[0])}),[t.label]),Object(d.jsxs)("div",{className:"nodeform",onSubmit:n,children:[Object(d.jsx)("div",{className:"parent-div",style:{height:t.style.height},children:Object(d.jsx)("div",{className:"node-div",style:Object(i.a)(Object(i.a)({},t.style),{},{borderRadius:"ellipse"===t.style.shape?"100%":0}),children:Object(d.jsx)("span",{ref:p,children:r?t.label:""})})}),Object(d.jsxs)("div",{className:"form",style:{padding:20},children:[r?Object(d.jsx)("div",{children:" Label"}):"",r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{className:"nodeLabel",ref:u,type:"text",required:!0,label:"Node Label",placeholder:"Enter Node Label",value:t.label.split(":")[0],onChange:function(e){":"!==e.target.value.slice(-1)?(D("".concat(e.target.value,":")),a(Object(i.a)(Object(i.a)({},t),{},{label:"".concat(e.target.value,":").concat(A)}))):(D(e.target.value),a(Object(i.a)(Object(i.a)({},t),{},{label:e.target.value+A})))}}),Object(d.jsx)("input",{className:"nodeLabelFile",type:"text",label:"Node Label file",placeholder:"Select file",value:t.label.split(":")[1],onChange:function(e){if(k(e.target.value.split("/").pop().split("   DESC: ")[0]),S){var n=S;":"!==S.slice(-1)&&(D("".concat(S,":")),n+=":"),a(Object(i.a)(Object(i.a)({},t),{},{label:n+e.target.value.split("/").pop().split("   DESC: ")[0]}))}else a(Object(i.a)(Object(i.a)({},t),{},{label:":".concat(e.target.value.split("/").pop().split("   DESC: ")[0])}))},list:"files"}),Object(d.jsx)("datalist",{id:"files",children:l.a.getFileList()?o.fileState.map((function(e){var t,a=[];if(e.key.toString().includes(".md"))return null;if([".v",".c",".cpp",".py",".m",".sh"].some((function(t){return e.key.toString().includes(t)}))){var n=e.key.toString().split(".")[0].concat(".md"),r=y.find((function(e){return e.key.toString()===n}));return m.get(r)?a.push(e.key.toString().concat(m.get(r))):a.push(e.key.toString()),T.push(T[T.length-1]+1),t=T[T.length-1]+1,Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("label",{htmlFor:"dropdown",children:Object(d.jsx)("option",{value:a},t)})})}return null})):""})]}):""]})]})},p=(a(206),function(e){var t=e.size,a=e.color,n=5*parseInt(t,10),r={borderLeft:"".concat(.8666*n,"px solid ").concat(a),borderBottom:"".concat(n/2,"px solid transparent"),borderTop:"".concat(n/2,"px solid transparent"),marginLeft:-1};return Object(d.jsx)("div",{style:r})}),h=function(e){var t=e.data,a=e.setData,n=e.submit,r=e.labelAllowed,o=Object(s.useCallback)((function(e){return e&&e.focus()}),[]);return Object(d.jsxs)("div",{className:"edgeform",onSubmit:n,children:[Object(d.jsxs)("div",{className:"par-div",children:[Object(d.jsx)("div",{className:"edge-div",style:{borderBottomWidth:t.style.thickness,borderBottomColor:t.style.backgroundColor,borderBottomStyle:t.style.shape}}),Object(d.jsx)(p,{size:t.style.thickness,color:t.style.backgroundColor}),Object(d.jsx)("div",{className:"label",children:t.label})]}),Object(d.jsxs)("div",{className:"form",children:[r?Object(d.jsx)("div",{children:" Label"}):"",r?Object(d.jsx)("input",{ref:o,className:"span-rest edgeLabel",type:"text",required:!0,label:"Edge Label",value:t.label,placeholder:"Enter Edge Label",onChange:function(e){return a(Object(i.a)(Object(i.a)({},t),{},{label:"".concat(e.target.value)}))}}):""]})]})},b={width:100,height:50,shape:"rectangle",opacity:1,backgroundColor:"#ffcc00",borderColor:"#000",borderWidth:1},_={thickness:1,backgroundColor:null,shape:"solid"},f={ModelOpen:!1,modalPayload:{cb:function(){},title:"",submitText:"",Children:"",defaultStyle:{},defaultLabel:"",labelAllowed:null},shareModal:!1,settingsModal:!1,editDetailsModal:!1,newGraphModal:!1,optionsModal:!1,markDownModal:!1,eleSelected:!1,drawModeOn:!0,undoEnabled:!1,redoEnabled:!1,graphs:[],curGraphIndex:-1,viewHistory:!1,isWorkflowOnServer:!1,curGraphInstance:null,zoomLevel:100,uploadedDirName:null,resetEnabled:!1,fileState:[],inputFile:"",params:"",maxTime:"",dockerCheck:!1,unlockCheck:!1,loader:!1,octave:!1},y={projectName:"",graphID:null,serverID:null,graphML:null,authorName:"",component:null,instance:null,id:null,fileHandle:null,fileName:null,built:!0,debugged:!1,ran:!1,destroyed:!1,cleared:!1,stopped:!1},O=function(e,t){switch(t.type){case n.Model_Open_Create_Node:return Object(i.a)(Object(i.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Node",submitText:"Create Node",type:"Node",Children:u,defaultStyle:b,defaultLabel:"",labelAllowed:!0,cb:t.cb}});case n.Model_Open_Create_Edge:return Object(i.a)(Object(i.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Edge",submitText:"Create Edge",Children:h,defaultStyle:_,defaultLabel:"",labelAllowed:!0,cb:t.cb}});case n.Model_Open_Update_Node:return Object(i.a)(Object(i.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Edit Node",submitText:"Edit Node",type:"Node",Children:u,defaultStyle:t.style,defaultLabel:t.label,labelAllowed:t.labelAllowed,cb:t.cb}});case n.Model_Open_Update_Edge:return Object(i.a)(Object(i.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Edit Edge",submitText:"Edit Edge",Children:h,defaultStyle:t.style,defaultLabel:t.label,labelAllowed:t.labelAllowed,cb:t.cb}});case n.Model_Close:return Object(i.a)(Object(i.a)({},e),{},{ModelOpen:!1});case n.ELE_SELECTED:return Object(i.a)(Object(i.a)({},e),{},{eleSelected:!0,eleSelectedPayload:t.payload});case n.ELE_UNSELECTED:return Object(i.a)(Object(i.a)({},e),{},{eleSelected:!1});case n.TURN_DRAW:return Object(i.a)(Object(i.a)({},e),{},{drawModeOn:t.payload});case n.SET_UNDO:return Object(i.a)(Object(i.a)({},e),{},{undoEnabled:t.payload});case n.SET_REDO:return Object(i.a)(Object(i.a)({},e),{},{redoEnabled:t.payload});case n.ADD_GRAPH:var a=-1,c=t.payload.graphID||(new Date).getTime().toString();return e.graphs.forEach((function(e,n){(e.graphID&&e.graphID===c||e.serverID&&e.serverID===t.payload.serverID)&&(a=n)})),-1!==a?Object(i.a)(Object(i.a)({},e),{},{newGraphModal:!1,curGraphIndex:a}):Object(i.a)(Object(i.a)({},e),{},{newGraphModal:!1,curGraphIndex:e.graphs.length,graphs:[].concat(Object(o.a)(e.graphs),[Object(i.a)(Object(i.a)({},y),{},{projectName:t.payload.projectName,graphID:c,serverID:t.payload.serverID,graphML:t.payload.graphML,fileHandle:t.payload.fileHandle||null,fileName:t.payload.fileName,authorName:t.payload.authorName||""})])});case n.ADD_GRAPH_BULK:return Object(i.a)(Object(i.a)({},e),{},{graphs:[].concat(Object(o.a)(e.graphs),Object(o.a)(t.payload))});case n.SET_CUR_INSTANCE:return Object(i.a)(Object(i.a)({},e),{},{curGraphInstance:t.payload});case n.SET_CUR_INDEX:case n.CHANGE_TAB:return Object(i.a)(Object(i.a)({},e),{},{curGraphIndex:t.payload});case n.NEW_GRAPH:return Object(i.a)(Object(i.a)({},e),{},{newGraphModal:!0});case n.REMOVE_GRAPH:return Object(i.a)(Object(i.a)({},e),{},{graphs:e.graphs.filter((function(e,a){return a!==t.payload})),curGraphIndex:e.curGraphIndex<t.payload?e.curGraphIndex:Math.max(0,e.curGraphIndex-1)});case n.SET_PROJECT_DETAILS:var s=Object(i.a)({},e);return s.graphs=s.graphs.map((function(e){return e.graphID===t.payload.graphID?Object(i.a)(Object(i.a)({},e),{},Object(r.a)({},t.payload.type,t.payload.value)):e})),Object(i.a)({},s);case n.SET_SHARE_MODAL:return Object(i.a)(Object(i.a)({},e),{},{shareModal:t.payload});case n.SET_OPTIONS_MODAL:return Object(i.a)(Object(i.a)({},e),{},{optionsModal:t.payload});case n.SET_FILE_STATE:return Object(i.a)(Object(i.a)({},e),{},{fileState:t.payload});case n.SET_SETTING_MODAL:return Object(i.a)(Object(i.a)({},e),{},{settingsModal:t.payload});case n.SET_MARKDOWN_MODAL:return Object(i.a)(Object(i.a)({},e),{},{markDownModal:t.payload});case n.SET_INPUT_FILE:return Object(i.a)(Object(i.a)({},e),{},{inputFile:t.payload.content,inputFileName:t.payload.fname});case n.SET_FILE_REF:return Object(i.a)(Object(i.a)({},e),{},{fileRef:t.payload});case n.SET_OPTIONS:return Object(i.a)(Object(i.a)({},e),{},{dockerCheck:t.payload.docker,unlockCheck:t.payload.unlock,params:t.payload.param,maxTime:t.payload.maxT,octave:t.payload.octave});case n.SET_FILE_HANDLE:var l=Object(i.a)({},e);return l.graphs=l.graphs.map((function(e,a){return a===t.payload.curGraphIndex?Object(i.a)(Object(i.a)({},e),{},{fileHandle:t.payload.fileHandle}):e})),Object(i.a)({},l);case n.SET_HISTORY_MODAL:return Object(i.a)(Object(i.a)({},e),{},{viewHistory:t.payload});case n.SET_LOADER:return Object(i.a)(Object(i.a)({},e),{},{loader:t.payload});case n.SET_AUTHOR:var d=Object(i.a)({},e);return d.graphs=d.graphs.map((function(e){return e.graphID===t.payload.graphID?Object(i.a)(Object(i.a)({},e),{},Object(r.a)({},t.payload.type,t.payload.value)):e})),Object(i.a)({},d);case n.IS_WORKFLOW_ON_SERVER:return Object(i.a)(Object(i.a)({},e),{},{isWorkflowOnServer:t.payload});case n.SET_ZOOM_LEVEL:return Object(i.a)(Object(i.a)({},e),{},{zoomLevel:t.payload});case n.SET_EDIT_DETAILS_MODAL:return Object(i.a)(Object(i.a)({},e),{},{editDetailsModal:t.payload});case n.SET_NEW_GRAPH_MODAL:return Object(i.a)(Object(i.a)({},e),{},{newGraphModal:t.payload});case n.CHANGE_RESET:return Object(i.a)(Object(i.a)({},e),{},{resetEnabled:t.payload});case n.EDIT_TEXTFILE:return Object(i.a)(Object(i.a)({},e),{},{textFileModal:t.payload.show,fileObj:t.payload.fileObj,fileHandle:t.payload.fileHandle});case n.SET_DIR_NAME:return Object(i.a)(Object(i.a)({},e),{},{uploadedDirName:t.payload});case n.SET_FUNCTIONS:var p=Object(i.a)({},e);return p.graphs[e.curGraphIndex].built=t.payload.built,p.graphs[e.curGraphIndex].debugged=t.payload.debugged,p.graphs[e.curGraphIndex].ran=t.payload.ran,p.graphs[e.curGraphIndex].cleared=t.payload.cleared,p.graphs[e.curGraphIndex].destroyed=t.payload.destroyed,p.graphs[e.curGraphIndex].stopped=t.payload.stopped,Object(i.a)({},p);default:return e}}}},[[384,1,2]]]);
//# sourceMappingURL=main.43530443.chunk.js.map